(function(E,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(E=typeof globalThis<"u"?globalThis:E||self,e(E.vxweb={},E.Vue))})(this,function(E,e){"use strict";const m=(t,s)=>{const i=t.__vccOpts||t;for(const[l,o]of s)i[l]=o;return i},ae={name:"message-toast",emits:["timeout","cancel"],props:{message:[String,Array],classname:String,timeout:{type:Number,default:5e3},active:{type:Boolean,default:!1}},data(){return{activeTimeout:null}},computed:{lines(){return typeof this.message=="string"?[this.message]:this.message}},watch:{active(){this.setTimeout()}},mounted(){this.setTimeout()},methods:{setTimeout(){window.clearTimeout(this.activeTimeout),this.active&&this.timeout&&(this.activeTimeout=window.setTimeout(()=>{this.$emit("timeout")},this.timeout))}}};function ce(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",{id:"messageBox",class:e.normalizeClass([{display:i.active},i.classname,"toast"])},[e.createElementVNode("button",{class:"btn btn-clear float-right",onClick:s[0]||(s[0]=n=>t.$emit("cancel"))}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.lines,n=>(e.openBlock(),e.createElementBlock("div",null,e.toDisplayString(n),1))),256))],2)}const de=m(ae,[["render",ce]]),he={name:"circular-progress",props:{progress:Number,radius:{type:Number,default:24},strokeWidth:{type:Number,default:8},color:{type:String,default:"white"}},computed:{size(){return 2*this.radius},normalizedRadius(){return this.radius-this.strokeWidth/2},circumference(){return this.normalizedRadius*2*Math.PI},strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},me=["height","width"],fe=["stroke-width","r","cx","cy"],pe=["stroke","stroke-dasharray","stroke-width","r","cx","cy"];function ue(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("svg",{height:r.size,width:r.size,class:"circular-progress"},[e.createElementVNode("circle",{stroke:"white",fill:"transparent","stroke-width":i.strokeWidth,r:r.normalizedRadius,cx:i.radius,cy:i.radius},null,8,fe),e.createElementVNode("circle",{stroke:i.color,fill:"transparent","stroke-dasharray":r.circumference+" "+r.circumference,style:e.normalizeStyle({strokeDashoffset:r.strokeDashoffset}),"stroke-width":i.strokeWidth,r:r.normalizedRadius,cx:i.radius,cy:i.radius},null,12,pe)],8,me)}const A=m(he,[["render",ue]]),ge={name:"form-input",props:["modelValue"],emits:["update:modelValue"]},be=["value"];function ye(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("input",{value:i.modelValue,class:"form-input",onInput:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.value))},null,40,be)}const S=m(ge,[["render",ye]]);let ke=function(){let t=0;return function(s){return(s||"")+ ++t}}();const _e={name:"Autocomplete",inheritAttrs:!1,components:{"autocomplete-input":S},emits:["update:modelValue","blur","submit"],props:{modelValue:{type:String,default:""},search:{type:Function,required:!0},baseClass:{type:String,default:"form-autocomplete"},resultListClass:{type:String,default:"menu"},resultClass:{type:String,default:"menu-item"},inputClass:{type:String,default:"autocomplete-input"},autoSelect:{type:Boolean,default:!1},getResultValue:{type:Function,default:t=>t}},data(){return{resultListId:ke(this.resultListClass+"-"),results:[],selectedIndex:-1,searchCounter:0,expanded:!1,loading:!1,position:"below",resetPosition:!0}},computed:{containerProps(){return{class:this.baseClass,style:{position:"relative"},"data-expanded":this.expanded,"data-loading":this.loading,"data-position":this.position}},inputProps(){return{class:this.inputClass,role:"combobox",autocomplete:"off",autocapitalize:"off",autocorrect:"off",spellcheck:"false","aria-autocomplete":"list","aria-haspopup":"listbox","aria-owns":this.resultListId,"aria-expanded":this.expanded?"true":"false","aria-activedescendant":this.selectedIndex>-1?this.resultProps[this.selectedIndex].id:"",...this.$attrs}},resultListProps(){return{id:this.resultListId,class:this.resultListClass,role:"listbox"}},resultProps(){return this.results.map((t,s)=>({id:this.resultClass+"-"+s,class:this.resultClass,"data-result-index":s,role:"option",...this.selectedIndex===s?{"aria-selected":"true"}:{}}))}},mounted(){document.body.addEventListener("click",this.handleDocumentClick)},beforeUnmount(){document.body.removeEventListener("click",this.handleDocumentClick)},updated(){if(!this.$refs.resultList)return;let t=this.$refs.input.$el.getBoundingClientRect(),s=this.$refs.resultList.getBoundingClientRect();this.resetPosition&&this.results.length&&(this.resetPosition=!1,this.position=t.bottom+s.height>window.innerHeight&&window.innerHeight-t.bottom<t.top&&window.pageYOffset+t.top-s.height>0?"above":"below");let i=this.$refs.resultList.querySelector('[data-result-index="'+this.selectedIndex+'"]');if(!i)return;let l=i.getBoundingClientRect();l.top<s.top?this.$refs.resultList.scrollTop-=s.top-l.top:l.bottom>s.bottom&&(this.$refs.resultList.scrollTop+=l.bottom-s.bottom)},methods:{handleInput(t){this.$emit("update:modelValue",t),this.updateResults(t)},handleFocus(t){this.updateResults(t.target.value)},handleBlur(){this.hideResults(),this.$emit("blur")},handleUp(){const t=this.results.length;this.selectedIndex=((this.selectedIndex-1)%t+t)%t},handleDown(t){this.expanded||this.handleFocus(t);const s=this.results.length;this.selectedIndex=((this.selectedIndex+1)%s+s)%s},handleEsc(){this.hideResults(),this.$emit("update:modelValue","")},handleEnter(){this.$emit("submit",this.selectResult())},handleTab(){this.selectResult()},hideResults(){this.selectedIndex=-1,this.results=[],this.expanded=!1,this.resetPosition=!0},selectResult(){const t=this.results[this.selectedIndex];return t&&this.$emit("update:modelValue",this.getResultValue(t)),this.hideResults(),t},handleResultClick(t){const s=t.target.closest("[data-result-index]");s&&(this.selectedIndex=parseInt(s.dataset.resultIndex,10),this.$emit("submit",this.selectResult()))},handleDocumentClick(t){this.$refs.container.contains(t.target)||this.hideResults()},updateResults(t){const s=this.search(t);if(s instanceof Promise){const i=++this.searchCounter;this.loading=!0,s.then(l=>{i===this.searchCounter&&(this.results=l,this.loading=!1,this.results.length?(this.selectedIndex=this.autoSelect?0:-1,this.expanded=!0):this.hideResults())})}else this.results=s,this.results.length===0?this.hideResults():(this.selectedIndex=this.autoSelect?0:-1,this.expanded=!0)}}};function we(t,s,i,l,o,r){const n=e.resolveComponent("autocomplete-input");return e.openBlock(),e.createElementBlock("div",e.mergeProps(r.containerProps,{ref:"container"}),[e.createVNode(n,e.mergeProps({ref:"input",value:i.modelValue},r.inputProps,{onInput:s[0]||(s[0]=a=>r.handleInput(a.target.value)),onKeydown:[e.withKeys(r.handleEnter,["enter"]),e.withKeys(r.handleEsc,["esc"]),e.withKeys(r.handleTab,["tab"]),e.withKeys(e.withModifiers(r.handleUp,["prevent"]),["up"]),e.withKeys(e.withModifiers(r.handleDown,["prevent"]),["down"])],onFocus:r.handleFocus,onBlur:r.handleBlur}),null,16,["value","onKeydown","onFocus","onBlur"]),o.results.length?(e.openBlock(),e.createElementBlock("ul",e.mergeProps({key:0,ref:"resultList"},r.resultListProps,{onClick:s[1]||(s[1]=(...a)=>r.handleResultClick&&r.handleResultClick(...a)),onMousedown:s[2]||(s[2]=e.withModifiers(()=>{},["prevent"]))}),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.results,(a,c)=>e.renderSlot(t.$slots,"result",{result:a,props:r.resultProps[c]},()=>[(e.openBlock(),e.createElementBlock("li",e.mergeProps({key:r.resultProps[c].id},r.resultProps[c]),e.toDisplayString(i.getResultValue(a)),17))])),256))],16)):e.createCommentVNode("",!0)],16)}const Ee=m(_e,[["render",we]]),C={formatDate(t,s,i){if(!t instanceof Date)return"";const l=i&&i.dayNames?i.dayNames:"Sun Mon Tue Wed Thu Fri Sat".split(" "),o=i&&i.monthNames?i.monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");return s.replace(/\bd\b/,t.getDate()).replace(/\bdd\b/,("0"+t.getDate()).slice(-2)).replace(/\bm\b/,t.getMonth()+1).replace(/\bmm\b/,("0"+(t.getMonth()+1)).slice(-2)).replace(/\bmmm\b/,o[t.getMonth()].trim()).replace(/\by\b/,t.getFullYear()).replace(/\bw\b/,l[t.getDay()].trim()).replace(/\bh\b/,("0"+t.getHours()).slice(-2)).replace(/\bi\b/,("0"+t.getMinutes()).slice(-2)).replace(/\bs\b/,("0"+t.getSeconds()).slice(-2))},parseDate(t,s){let i,l=s.toLowerCase().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=[];if((i=s.match(/\bd\b/gi))&&i.length===1)l=l.replace("d","(\\d{1,2})");else if((i=s.match(/\bdd\b/gi))&&i.length===1)l=l.replace("dd","(\\d{2})");else return!1;if(o.push({srcPos:s.toLowerCase().indexOf("d"),destPos:2}),(i=s.match(/\bm\b/gi))&&i.length===1)l=l.replace("m","(\\d{1,2})");else if((i=s.match(/\bmm\b/gi))&&i.length===1)l=l.replace("mm","(\\d{2})");else return!1;if(o.push({srcPos:s.toLowerCase().indexOf("m"),destPos:1}),(i=s.match(/\by\b/gi))&&i.length===1)l=l.replace("y","(\\d{4})");else return!1;if(o.push({srcPos:s.toLowerCase().indexOf("y"),destPos:0}),!(i=t.match(l)))return!1;i.shift(),o.sort((c,h)=>c.srcPos<h.srcPos?-1:1);let r=[],n,a;for(;n=i.shift();)a=o.shift(),r[a.destPos]=n;return r=Date.parse(r.join("-")),r?(r=new Date(r),new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0)):!1},isValidTime:function(t){let s=t.match(/^\s*([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2}))?\s*$/);return s&&s[1]<24&&s[2]<60&&(!s[3]||s[3]<60)}},xe={name:"date-input",data(){return{inputString:null}},props:{monthNames:{type:Array,default:()=>"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},dayNames:{type:Array,default:()=>"Mon Tue Wed Thu Fri Sat Sun".split(" ")},outputFormat:{type:String,default:"y-mm-dd"},inputFormat:{type:String,default:"y-m-d"},showButton:{type:Boolean,default:!0},modelValue:Date},watch:{modelValue(t){this.inputString=t?C.formatDate(t,this.outputFormat):""}},computed:{dateString(){return this.modelValue?C.formatDate(this.modelValue,this.outputFormat):""},computedStyles(){return{width:"100%"}}},methods:{handleBlur(){let t=C.parseDate(this.inputString,this.inputFormat);this.$emit("update:modelValue",t||null)},handleClear(){this.$emit("update:modelValue",null)}}},De={class:"date-input"},Ce={key:0,class:"form-input"},Ne={class:"chip"};function Ve(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",De,[e.createElementVNode("div",{class:"input-group",style:e.normalizeStyle(r.computedStyles)},[r.dateString?(e.openBlock(),e.createElementBlock("div",Ce,[e.createElementVNode("span",Ne,[e.createTextVNode(e.toDisplayString(r.dateString)+" ",1),e.createElementVNode("a",{href:"#",class:"btn btn-clear","aria-label":"Close",role:"button",onClick:s[0]||(s[0]=e.withModifiers((...n)=>r.handleClear&&r.handleClear(...n),["prevent"]))})])])):e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:1,type:"text",class:"form-input",autocomplete:"off","onUpdate:modelValue":s[1]||(s[1]=n=>o.inputString=n),onBlur:s[2]||(s[2]=(...n)=>r.handleBlur&&r.handleBlur(...n)),onInput:s[3]||(s[3]=e.withModifiers(()=>{},["stop"]))},null,544)),[[e.vModelText,o.inputString]]),i.showButton?(e.openBlock(),e.createElementBlock("button",{key:2,type:"button",class:"btn webfont-icon-only btn-primary input-group-btn",onClick:s[4]||(s[4]=e.withModifiers(n=>t.$emit("toggle-datepicker"),["stop"]))}," ")):e.createCommentVNode("",!0)],4)])}const Be={name:"date-picker",components:{DateInput:m(xe,[["render",Ve]])},emits:["update:modelValue","month-change"],data(){return{sheetDate:null,selectedDate:null,expanded:!this.hasInput,align:"left"}},watch:{modelValue(t){t?(this.selectedDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this.sheetDate=new Date(this.selectedDate.getTime())):(this.selectedDate=null,this.sheetDate=this.today),this.sheetDate.setDate(1)},expanded(t){t&&this.hasInput&&this.$nextTick(()=>this.align=this.$refs.input.$el.getBoundingClientRect().left+this.$refs.calendar.getBoundingClientRect().width>window.innerWidth?"right":"left")}},computed:{rootProps(){return{class:["datepicker",this.$attrs.class],style:{position:"relative"}}},inputProps(){return{style:{position:"relative"},inputFormat:this.$attrs["input-format"],outputFormat:this.$attrs["output-format"],dayNames:this.$attrs["day-names"],monthNames:this.$attrs["month-names"],showButton:this.$attrs["show-button"]}},calendarProps(){return{style:this.hasInput?{display:this.expanded?"block":"none",position:"absolute",top:"100%",transform:"translateY(.2rem)","z-index":300}:{}}},days(){const t=[],s=this.sheetDate.getFullYear(),i=this.sheetDate.getMonth(),l=new Date(s,i+1,0),o=new Date(s,i,0).getDay()+1-this.startOfWeekIndex,r=(7-l.getDay())%7-1+this.startOfWeekIndex;for(let n=-o,a=l.getDate()+r;n<a;++n)t.push(new Date(s,i,n+1));return t},monthLabel(){return this.monthNames[this.sheetDate.getMonth()]},today(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())}},props:{modelValue:Date,validFrom:Date,validUntil:Date,weekdays:{type:Array,default:()=>"M T W T F S S".split(" ")},monthNames:{type:Array,default:()=>"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")},startOfWeekIndex:{type:Number,default:1,validator:t=>!t||t===1},hasInput:{type:Boolean,default:!0}},created(){this.sheetDate=new Date(this.today.getTime()),this.sheetDate.setDate(1)},mounted(){this.hasInput&&document.body.addEventListener("click",this.handleBodyClick),this.modelValue&&(this.sheetDate=new Date(this.modelValue.getTime()),this.sheetDate.setDate(1),this.selectedDate=new Date(this.modelValue.getFullYear(),this.modelValue.getMonth(),this.modelValue.getDate()))},beforeUnmount(){document.body.removeEventListener("click",this.handleBodyClick)},methods:{previousMonth(){this.sheetDate=new Date(this.sheetDate.getFullYear(),this.sheetDate.getMonth()-1,1),this.$emit("month-change",this.sheetDate)},nextMonth(){this.sheetDate=new Date(this.sheetDate.getFullYear(),this.sheetDate.getMonth()+1,1),this.$emit("month-change",this.sheetDate)},selectDate(t){this.selectedDate=t,this.$emit("update:modelValue",t),this.expanded=!this.hasInput},toggleDatepicker(){this.expanded=!this.expanded},handleBodyClick(){this.expanded=!1},handleInput(t){this.selectedDate=t,this.$emit("update:modelValue",t)}}},Se={class:"calendar-nav navbar"},Fe={class:"month navbar-primary"},$e={class:"calendar-container"},Te={class:"calendar-header"},Ie={class:"calendar-date"},Pe={class:"calendar-body"},Oe=["disabled","onClick"];function Me(t,s,i,l,o,r){const n=e.resolveComponent("date-input");return e.openBlock(),e.createElementBlock("div",e.normalizeProps(e.guardReactiveProps(r.rootProps)),[i.hasInput?(e.openBlock(),e.createBlock(n,e.mergeProps({key:0,modelValue:o.selectedDate,"onUpdate:modelValue":s[0]||(s[0]=a=>o.selectedDate=a),onToggleDatepicker:r.toggleDatepicker},r.inputProps,{ref:"input"}),null,16,["modelValue","onToggleDatepicker"])):e.createCommentVNode("",!0),e.createElementVNode("div",e.mergeProps({class:"calendar"},r.calendarProps,{ref:"calendar",class:o.align==="left"?"align-left":"align-right"}),[e.createElementVNode("div",Se,[e.createElementVNode("button",{class:"btn btn-action btn-link btn-large prvMon",onClick:s[1]||(s[1]=e.withModifiers((...a)=>r.previousMonth&&r.previousMonth(...a),["stop"]))}),e.createElementVNode("div",Fe,e.toDisplayString(r.monthLabel)+" "+e.toDisplayString(o.sheetDate.getFullYear()),1),e.createElementVNode("button",{class:"btn btn-action btn-link btn-large nxtMon",onClick:s[2]||(s[2]=e.withModifiers((...a)=>r.nextMonth&&r.nextMonth(...a),["stop"]))})]),e.createElementVNode("div",$e,[e.createElementVNode("div",Te,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.weekdays,a=>(e.openBlock(),e.createElementBlock("div",Ie,e.toDisplayString(a),1))),256))]),e.createElementVNode("div",Pe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.days,a=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["calendar-date text-center",["prev-month","","next-month"][a.getMonth()-o.sheetDate.getMonth()+1]])},[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["date-item",{active:o.selectedDate&&a.getTime()===o.selectedDate.getTime(),"date-today":a.getTime()===r.today.getTime()}]),disabled:(i.validFrom&&i.validFrom)>a||i.validUntil&&i.validUntil<a,onClick:e.withModifiers(c=>(i.validFrom&&i.validFrom)>a||i.validUntil&&i.validUntil<a?null:r.selectDate(a),["stop"])},e.toDisplayString(a.getDate()),11,Oe)],2))),256))])])],16)],16)}const z=m(Be,[["render",Me]]),Wo="",Re={name:"sortable",emits:["before-sort","after-sort"],props:{columns:{type:Array,required:!0,validator(t){for(let s=t.length;s--;)if(t[s].label===void 0||t[s].prop===void 0)return!1;return!0}},rows:{type:Array,required:!0},offset:{type:Number,default:null},count:{type:Number,default:null},sortProp:{type:String},sortDirection:{type:String,validator(t){return!t||["asc","desc"].indexOf(t)!==-1}},keyProperty:{type:String,default:"key"}},data(){return{sortColumn:this.columns.find(({prop:t})=>t===this.sortProp),sortDir:this.sortDirection}},computed:{sortedRows(){let t=this.rows.slice();if(this.sortColumn)if(this.sortDir==="asc"&&this.sortColumn.sortAscFunction)t.sort(this.sortColumn.sortAscFunction);else if(this.sortDir==="desc"&&this.sortColumn.sortDescFunction)t.sort(this.sortColumn.sortDescFunction);else{let l=this.sortColumn.prop;t.sort((o,r)=>o[l]<r[l]?this.sortDir==="asc"?-1:1:o[l]>r[l]?this.sortDir==="asc"?1:-1:0)}let s=this.offset||0,i=this.count||t.length;return t.slice(s,s+i)}},methods:{clickSort(t){this.$emit("before-sort"),this.sortColumn===t?this.sortDir=this.sortDir==="asc"?"desc":"asc":(this.sortColumn=t,this.sortDir=this.sortDir||"asc"),this.$nextTick(()=>this.$emit("after-sort"))}}},Le={class:"table table-striped"},Ae=["onClick"];function ze(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("table",Le,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.columns,n=>(e.openBlock(),e.createElementBlock("th",{class:e.normalizeClass([{"sortable-header":n.sortable},n.cssClass,o.sortColumn===n?o.sortDir:null,n.width]),onClick:a=>n.sortable?r.clickSort(n):null},[e.renderSlot(t.$slots,n.prop+"-header",{column:n},()=>[e.createTextVNode(e.toDisplayString(n.label),1)],!0)],10,Ae))),256))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.sortedRows,n=>(e.openBlock(),e.createElementBlock("tr",{key:n[i.keyProperty],class:e.normalizeClass(n.cssClass)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.columns,a=>(e.openBlock(),e.createElementBlock("td",{class:e.normalizeClass({active:o.sortColumn===a})},[e.renderSlot(t.$slots,a.prop,{row:n},()=>[e.createTextVNode(e.toDisplayString(n[a.prop]),1)],!0)],2))),256))],2))),128))])])}const U=m(Re,[["render",ze],["__scopeId","data-v-51ed61a7"]]),Ue={name:"simple-tree-branch",emits:["branch-selected"],data(){return{expanded:!1}},props:{branch:{type:Object,default:{}}},mounted(){if(this.branch.current){let t=this.$parent;for(;t&&t.branch&&t.expanded!==void 0;)t.expanded=!0,t=t.$parent}}},je=["id","checked"],qe=["for"],We={key:1},Ke=["href"],He={key:3};function Je(t,s,i,l,o,r){const n=e.resolveComponent("simple-tree-branch",!0);return e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass({terminates:!i.branch.branches||!i.branch.branches.length})},[i.branch.branches&&i.branch.branches.length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("input",{type:"checkbox",id:"branch-"+i.branch.id,onClick:s[0]||(s[0]=a=>o.expanded=!o.expanded),checked:o.expanded},null,8,je),e.createElementVNode("label",{for:"branch-"+i.branch.id},null,8,qe)],64)):e.createCommentVNode("",!0),i.branch.current?(e.openBlock(),e.createElementBlock("strong",We,e.toDisplayString(i.branch.label),1)):(e.openBlock(),e.createElementBlock("a",{key:2,href:i.branch.path,onClick:s[1]||(s[1]=e.withModifiers(a=>t.$emit("branch-selected",i.branch),["prevent"]))},e.toDisplayString(i.branch.label),9,Ke)),i.branch.branches&&i.branch.branches.length?e.withDirectives((e.openBlock(),e.createElementBlock("ul",He,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.branch.branches,a=>(e.openBlock(),e.createBlock(n,{branch:a,key:a.id,onBranchSelected:s[2]||(s[2]=c=>t.$emit("branch-selected",c))},null,8,["branch"]))),128))],512)),[[e.vShow,o.expanded]]):e.createCommentVNode("",!0)],2)}const Ge={name:"simple-tree",props:{branch:Object},components:{SimpleTreeBranch:m(Ue,[["render",Je]])}},Ye={class:"vx-tree"};function Xe(t,s,i,l,o,r){const n=e.resolveComponent("simple-tree-branch");return e.openBlock(),e.createElementBlock("ul",Ye,[e.createVNode(n,{branch:i.branch,onBranchSelected:s[0]||(s[0]=a=>t.$emit("branch-selected",a))},null,8,["branch"])])}const j=m(Ge,[["render",Xe]]),T={mounted:t=>t.focus()},Qe={name:"filemanager-add",emits:["upload","create-folder"],props:{multiple:{type:Boolean,default:!0}},data(){return{showAddFolderInput:!1}},methods:{fileChanged(t){const s=t.target.files||t.dataTransfer.files;s&&this.$emit("upload",s)},addFolder(t){const s=t.target.value.trim();s&&this.$emit("create-folder",s),this.showAddFolderInput=!1}},directives:{focus:T}},Ze=e.createElementVNode("label",{class:"btn with-webfont-icon-left btn-link","data-icon":"",for:"file_upload"},"Datei hochladen",-1),ve=["multiple"];function et(t,s,i,l,o,r){const n=e.resolveDirective("focus");return e.openBlock(),e.createElementBlock("div",null,[o.showAddFolderInput?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,class:"form-input",onKeydown:[s[0]||(s[0]=e.withKeys((...a)=>r.addFolder&&r.addFolder(...a),["enter"])),s[1]||(s[1]=e.withKeys(a=>o.showAddFolderInput=!1,["esc"]))],onBlur:s[2]||(s[2]=a=>o.showAddFolderInput=!1)},null,544)),[[n]]):e.createCommentVNode("",!0),o.showAddFolderInput?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn with-webfont-icon-left btn-link",type:"button","data-icon":"",onClick:s[3]||(s[3]=e.withModifiers(a=>o.showAddFolderInput=!0,["stop"]))},"Verzeichnis erstellen ")),Ze,e.createElementVNode("input",{type:"file",id:"file_upload",class:"d-none",multiple:i.multiple,onChange:s[4]||(s[4]=(...a)=>r.fileChanged&&r.fileChanged(...a))},null,40,ve)])}const tt=m(Qe,[["render",et]]),st={name:"filemanager-actions",emits:["delete-selection","move-selection"],props:{files:{type:Array,default:()=>[]},folders:{type:Array,default:()=>[]}},methods:{async confirmDelete(){await this.$parent.$refs.confirm.open("Auswahl löschen","Selektierte Dateien/Ordner wirklich löschen?")&&this.$emit("delete-selection")},async pickFolder(){this.$emit("move-selection")}}},it={key:0,class:"mx-2"},nt=["data-tooltip"],ot=["data-tooltip"];function rt(t,s,i,l,o,r){return i.files.length||i.folders.length?(e.openBlock(),e.createElementBlock("div",it,[e.createElementVNode("button",{class:"btn btn-link webfont-icon-only tooltip","data-tooltip":i.files.length+i.folders.length+" gewählte Dateien/Ordner löschen",type:"button",onClick:s[0]||(s[0]=(...n)=>r.confirmDelete&&r.confirmDelete(...n))},"",8,nt),e.createElementVNode("button",{class:"btn btn-link webfont-icon-only tooltip","data-tooltip":i.files.length+i.folders.length+" gewählte Dateien/Ordner verschieben",type:"button",onClick:s[1]||(s[1]=(...n)=>r.pickFolder&&r.pickFolder(...n))},"",8,ot)])):e.createCommentVNode("",!0)}const lt=m(st,[["render",rt]]),at={name:"filemanager-search",data(){return{value:"",results:{files:[],folders:[]},loading:!1,hideDialog:!1}},props:{placeholder:{type:String,default:"Datei/Verzeichnis suchen..."},search:{type:Function,required:!0}},computed:{inputProps(){return{value:this.value,placeholder:this.placeholder}},showResults:{get(){return this.results.folders.length||this.results.files.length},set(t){t||(this.results.folders=[],this.results.files=[])}}},methods:{handleInput(t){this.value=t.target.value;const s=this.search(this.value);s instanceof Promise?(this.loading=!0,s.then(({files:i,folders:l})=>{this.results.files=i||[],this.results.folders=l||[],this.loading=!1})):this.results=Object.assign({},this.results,s)},handleEsc(){this.value="",this.showResults=!1}}},ct={class:"has-icon-right"},dt={key:0,class:"form-icon loading"},ht={key:0,class:"modal-container",style:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}},mt={class:"modal-header"},ft=e.createElementVNode("div",{class:"modal-title h5"},"Gefundene Dateien und Ordner…",-1),pt={class:"modal-body"},ut={key:0,class:"divider"},gt=e.createElementVNode("br",null,null,-1),bt={class:"text-gray"};function yt(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",ct,[e.createElementVNode("input",e.mergeProps({class:"text-input",onKeydown:s[0]||(s[0]=e.withKeys((...n)=>r.handleEsc&&r.handleEsc(...n),["esc"])),onInput:s[1]||(s[1]=(...n)=>r.handleInput&&r.handleInput(...n)),onFocus:s[2]||(s[2]=(...n)=>r.handleInput&&r.handleInput(...n))},r.inputProps),null,16),o.loading?(e.openBlock(),e.createElementBlock("i",dt)):e.createCommentVNode("",!0)]),r.showResults?(e.openBlock(),e.createElementBlock("div",ht,[e.createElementVNode("div",mt,[e.createElementVNode("a",{href:"#close",class:"btn btn-clear float-right","aria-label":"Close",onClick:s[3]||(s[3]=e.withModifiers(n=>r.showResults=!1,["prevent"]))}),ft]),e.createElementVNode("div",pt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.results.folders||[],n=>(e.openBlock(),e.createElementBlock("div",{key:n.id},[e.renderSlot(t.$slots,"folder",{folder:n},()=>[e.createTextVNode(e.toDisplayString(n.name),1)])]))),128)),o.results.folders.length&&o.results.files.length?(e.openBlock(),e.createElementBlock("div",ut)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.results.files||[],n=>(e.openBlock(),e.createElementBlock("div",{key:n.id},[e.renderSlot(t.$slots,"file",{file:n},()=>[e.createTextVNode(e.toDisplayString(n.name)+" ("+e.toDisplayString(n.type)+")",1),gt,e.createElementVNode("span",bt,e.toDisplayString(n.path),1)])]))),128))])])):e.createCommentVNode("",!0)])}const kt=m(at,[["render",yt]]),_t={name:"filemanager-breadcrumbs",emits:["breadcrumb-clicked"],data(){return{items:[]}},props:{breadcrumbs:Array,folders:Array,currentFolder:Number},watch:{breadcrumbs(t){(t.length>=this.items.length||this.items.map(s=>s.folder).join().indexOf(t.map(s=>s.folder).join())!==0)&&(this.items=t)},folders:{deep:!0,handler(t){let s=this.items.findIndex(i=>i.folder===this.currentFolder);if(this.items[s+1]){let i=t.findIndex(({id:l})=>l===this.items[s+1].folder);i===-1?this.items=this.items.slice(0,s+1):this.items[s+1].name=t[i].name}}}}},wt={class:"btn-group"},Et=["onClick"];function xt(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("span",wt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.items,(n,a)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["btn",{active:n.folder===i.currentFolder}]),key:a,onClick:c=>t.$emit("breadcrumb-clicked",n.folder)},e.toDisplayString(n.name),11,Et))),128))])}const Dt=m(_t,[["render",xt]]);async function g(t,s="GET",i={},l=null){return!i["X-CSRF-Token"]&&document.querySelector('meta[name="csrf-token"]')&&(i["X-CSRF-Token"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content")),i["X-Requested-With"]="XMLHttpRequest",await(await fetch(t,{method:s.toUpperCase(),body:l,headers:i})).json()}const _={create(t,s={}){return t+(t.indexOf("?")!==-1?"&":"?")+this.objectToSearch(s)},searchToObject(t){return Object.fromEntries(new URLSearchParams(t))},objectToSearch(t){return new URLSearchParams(t).toString()}},Ct={name:"folder-tree",components:{"simple-tree":j},data(){return{show:!1,resolve:null,reject:null,root:{}}},props:{title:{type:String,default:"Zielordner wählen"}},methods:{async open(t,s){return this.root=await g(_.create(t,{folder:s})),this.show=!0,new Promise((i,l)=>{this.resolve=i,this.reject=l})},cancel(){this.show=!1,this.resolve(!1)},folderSelected(t){this.show=!1,this.resolve(t)}}},Nt={class:"modal-container"},Vt={class:"modal-header"},Bt={class:"modal-title h5"},St={class:"modal-body"};function Ft(t,s,i,l,o,r){const n=e.resolveComponent("simple-tree");return e.openBlock(),e.createElementBlock("div",{ref:"container",class:e.normalizeClass(["modal",{active:o.show}])},[e.createElementVNode("div",Nt,[e.createElementVNode("div",Vt,[e.createElementVNode("a",{href:"#close",class:"btn btn-clear float-right","aria-label":"Close",onClick:s[0]||(s[0]=e.withModifiers((...a)=>r.cancel&&r.cancel(...a),["prevent"]))}),e.createElementVNode("div",Bt,e.toDisplayString(i.title),1)]),e.createElementVNode("div",St,[e.createVNode(n,{branch:o.root,onBranchSelected:r.folderSelected},null,8,["branch","onBranchSelected"])])])],2)}const q=m(Ct,[["render",Ft]]),$t={name:"confirm",props:{config:{type:Object}},data(){return{title:"",message:"",show:!1,resolve:null,reject:null,options:{okLabel:"Ok",cancelLabel:"Cancel",okClass:"btn-success"}}},watch:{config(){this.options=Object.assign({},this.options,this.config)}},created(){this.options=Object.assign({},this.options,this.config)},methods:{open(t,s,i){return this.title=t,this.message=s,this.show=!0,this.$nextTick(()=>this.$refs.okButton.focus()),this.options=Object.assign(this.options,i||{}),new Promise((l,o)=>{this.resolve=l,this.reject=o})},ok(){this.show=!1,this.resolve(!0)},cancel(){this.show=!1,this.resolve(!1)}}},Tt={class:"modal-container"},It={key:0,class:"modal-header bg-error text-light"},Pt={class:"modal-title h5"},Ot={class:"modal-body"},Mt={class:"content"},Rt={class:"modal-footer"};function Lt(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",{ref:"container",class:e.normalizeClass(["modal modal-sm",{active:o.show}]),onKeydown:s[3]||(s[3]=e.withKeys(e.withModifiers((...n)=>r.cancel&&r.cancel(...n),["stop"]),["esc"]))},[e.createElementVNode("a",{href:"#close",class:"modal-overlay",onClick:s[0]||(s[0]=e.withModifiers((...n)=>r.cancel&&r.cancel(...n),["prevent"]))}),e.createElementVNode("div",Tt,[o.title?(e.openBlock(),e.createElementBlock("div",It,[e.createElementVNode("div",Pt,e.toDisplayString(o.title),1)])):e.createCommentVNode("",!0),e.createElementVNode("div",Ot,[e.createElementVNode("div",Mt,e.toDisplayString(o.message),1)]),e.createElementVNode("div",Rt,[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["btn mr-2",o.options.okClass]),onClick:s[1]||(s[1]=e.withModifiers((...n)=>r.ok&&r.ok(...n),["prevent"])),ref:"okButton"},e.toDisplayString(o.options.okLabel),3),e.createElementVNode("button",{type:"button",class:"btn btn-link",onClick:s[2]||(s[2]=e.withModifiers((...n)=>r.cancel&&r.cancel(...n),["prevent"]))},e.toDisplayString(o.options.cancelLabel),1)])])],34)}const W=m($t,[["render",Lt]]),At={name:"alert",props:{config:{type:Object}},data(){return{title:"",message:"",show:!1,resolve:null,reject:null,options:{label:"Ok",buttonClass:"btn-success"}}},watch:{config(){this.options=Object.assign({},this.options,this.config)}},created(){this.options=Object.assign({},this.options,this.config)},methods:{open(t,s,i){return this.title=t,this.message=s,this.show=!0,this.$nextTick(()=>this.$refs.button.focus()),this.options=Object.assign(this.options,i||{}),new Promise((l,o)=>{this.resolve=l,this.reject=o})},ok(){this.show=!1,this.resolve(!0)}}},zt=e.createElementVNode("div",{class:"modal-overlay"},null,-1),Ut={class:"modal-container"},jt={key:0,class:"modal-header bg-error text-light"},qt={class:"modal-title h5"},Wt={class:"modal-body"},Kt={class:"content"},Ht={class:"modal-footer"};function Jt(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",{ref:"container",class:e.normalizeClass(["modal modal-sm",{active:o.show}])},[zt,e.createElementVNode("div",Ut,[o.title?(e.openBlock(),e.createElementBlock("div",jt,[e.createElementVNode("div",qt,e.toDisplayString(o.title),1)])):e.createCommentVNode("",!0),e.createElementVNode("div",Wt,[e.createElementVNode("div",Kt,e.toDisplayString(o.message),1)]),e.createElementVNode("div",Ht,[e.createElementVNode("button",{type:"button",class:e.normalizeClass(["btn",o.options.buttonClass]),onClick:s[0]||(s[0]=e.withModifiers((...n)=>r.ok&&r.ok(...n),["prevent"])),ref:"button"},e.toDisplayString(o.options.label),3)])])],2)}const K=m(At,[["render",Jt]]);function I(t,s){let i=Math.floor(Math.floor(Math.log(t)/Math.log(1e3)));return(t/Math.pow(1e3,i)).toFixed(i?2:0).toString().replace(".",s||".")+["B","kB","MB","GB"][i]}const Gt={name:"file-edit-form",emits:["response-received"],props:{initialData:{type:Object,default:{}},fileInfo:{type:Object,default:{}},url:{type:String,default:""}},data:()=>({form:{},response:{},loading:!1}),computed:{errors(){return this.response?this.response.errors||{}:{}},message(){return this.response?this.response.message:""}},watch:{initialData(t){this.form=Object.assign({},this.form,t)}},methods:{async submit(){this.loading=!0;let t={};Object.keys(this.form).forEach(s=>{this.form[s]!==null&&(t[s]=this.form[s])}),this.response=await g(this.url,"POST",{},JSON.stringify(t)),this.$emit("response-received",this.response),this.loading=!1},formatFilesize:I}},Yt={class:"columns"},Xt={class:"column"},Qt=["src"],Zt={class:"column"},vt={class:"table"},es=e.createElementVNode("td",null,"Typ",-1),ts={key:0},ss=e.createElementVNode("td",null,"Cache",-1),is=e.createElementVNode("td",null,"Link",-1),ns=["href"],os=e.createElementVNode("div",{class:"divider","data-content":"Metadaten der Datei"},null,-1),rs={class:"form-group"},ls=e.createElementVNode("label",{for:"title_input"},"Titel",-1),as={class:"form-group"},cs=e.createElementVNode("label",{for:"subtitle_input"},"Untertitel",-1),ds={class:"form-group"},hs=e.createElementVNode("label",{for:"description_input"},"Beschreibung",-1),ms=e.createElementVNode("div",{class:"divider","data-content":"Erweiterte Einstellungen"},null,-1),fs={class:"form-group"},ps=e.createElementVNode("label",{for:"customsort_input"},"Sortierziffer",-1),us={class:"form-group"},gs=["disabled"];function bs(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("form",{action:"/",onSubmit:s[5]||(s[5]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",Yt,[e.createElementVNode("div",Xt,[i.fileInfo.thumb?(e.openBlock(),e.createElementBlock("img",{key:0,src:i.fileInfo.thumb,class:"img-responsive"},null,8,Qt)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Zt,[e.createElementVNode("table",vt,[e.createElementVNode("tr",null,[es,e.createElementVNode("td",null,e.toDisplayString(i.fileInfo.mimetype),1)]),i.fileInfo.cache?(e.openBlock(),e.createElementBlock("tr",ts,[ss,e.createElementVNode("td",null,e.toDisplayString(i.fileInfo.cache.count)+" Files, "+e.toDisplayString(r.formatFilesize(i.fileInfo.cache.totalSize,",")),1)])):e.createCommentVNode("",!0),e.createElementVNode("tr",null,[is,e.createElementVNode("td",null,[e.createElementVNode("a",{href:"/"+i.fileInfo.path,target:"_blank"},e.toDisplayString(i.fileInfo.name),9,ns)])])])])]),os,e.createElementVNode("div",rs,[ls,e.withDirectives(e.createElementVNode("input",{id:"title_input",class:e.normalizeClass(["form-input",{"is-error":r.errors.title}]),"onUpdate:modelValue":s[0]||(s[0]=n=>t.form.title=n),autocomplete:"off"},null,2),[[e.vModelText,t.form.title]])]),e.createElementVNode("div",as,[cs,e.withDirectives(e.createElementVNode("input",{id:"subtitle_input",class:e.normalizeClass(["form-input",{"is-error":r.errors.subtitle}]),"onUpdate:modelValue":s[1]||(s[1]=n=>t.form.subtitle=n),autocomplete:"off"},null,2),[[e.vModelText,t.form.subtitle]])]),e.createElementVNode("div",ds,[hs,e.withDirectives(e.createElementVNode("textarea",{rows:"2",id:"description_input",class:e.normalizeClass(["form-input",{"is-error":r.errors.description}]),"onUpdate:modelValue":s[2]||(s[2]=n=>t.form.description=n)},null,2),[[e.vModelText,t.form.description]])]),ms,e.createElementVNode("div",fs,[ps,e.withDirectives(e.createElementVNode("input",{id:"customsort_input",class:e.normalizeClass(["form-input col-4",{"is-error":r.errors.customsort}]),"onUpdate:modelValue":s[3]||(s[3]=n=>t.form.customsort=n),autocomplete:"off"},null,2),[[e.vModelText,t.form.customsort]])]),e.createElementVNode("div",us,[e.createElementVNode("button",{type:"button",onClick:s[4]||(s[4]=(...n)=>r.submit&&r.submit(...n)),class:e.normalizeClass(["btn btn-success col-12",{loading:t.loading}]),disabled:t.loading},"Änderungen speichern ",10,gs)])],32)}const ys=m(Gt,[["render",bs]]),ks={name:"folder-edit-form",emits:["response-received"],props:{initialData:{type:Object,default:{}},folderInfo:{type:Object,default:{}},url:{type:String,default:""}},data:()=>({form:{},response:{},loading:!1}),computed:{errors(){return this.response?this.response.errors||{}:{}},message(){return this.response?this.response.message:""}},watch:{initialData(t){this.form=Object.assign({},this.form,t)}},methods:{async submit(){this.loading=!0;let t={};Object.keys(this.form).forEach(s=>{this.form[s]!==null&&(t[s]=this.form[s])}),this.response=await g(this.url,"POST",{},JSON.stringify(t)),this.$emit("response-received",this.response),this.loading=!1}}},_s=e.createElementVNode("div",{class:"divider","data-content":"Metadaten des Ordners"},null,-1),ws={class:"form-group"},Es=e.createElementVNode("label",{for:"title_input"},"Titel",-1),xs={class:"form-group"},Ds=e.createElementVNode("label",{for:"description_input"},"Beschreibung",-1),Cs={class:"form-group"},Ns=["disabled"];function Vs(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("form",{action:"/",onSubmit:s[3]||(s[3]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",null,e.toDisplayString(i.folderInfo.path),1),_s,e.createElementVNode("div",ws,[Es,e.withDirectives(e.createElementVNode("input",{id:"title_input",class:e.normalizeClass(["form-input",{"is-error":r.errors.title}]),"onUpdate:modelValue":s[0]||(s[0]=n=>t.form.title=n),autocomplete:"off"},null,2),[[e.vModelText,t.form.title]])]),e.createElementVNode("div",xs,[Ds,e.withDirectives(e.createElementVNode("textarea",{rows:"2",id:"description_input",class:e.normalizeClass(["form-input",{"is-error":r.errors.description}]),"onUpdate:modelValue":s[1]||(s[1]=n=>t.form.description=n)},null,2),[[e.vModelText,t.form.description]])]),e.createElementVNode("div",Cs,[e.createElementVNode("button",{type:"button",onClick:s[2]||(s[2]=(...n)=>r.submit&&r.submit(...n)),class:e.normalizeClass(["btn btn-success col-12",{loading:t.loading}]),disabled:t.loading},"Änderungen speichern ",10,Ns)])],32)}const Bs=m(ks,[["render",Vs]]);function H(t,s="GET",i={},l=null,o=null,r=null,n=null){!i["X-CSRF-Token"]&&document.querySelector('meta[name="csrf-token"]')&&(i["X-CSRF-Token"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content")),i["Content-type"]=i["Content-type"]||"application/x-www-form-urlencoded",i["X-Requested-With"]="XMLHttpRequest";let a=new XMLHttpRequest,c=new Promise((h,u)=>{a.onreadystatechange=()=>{a.readyState===4&&(a.status>=200&&a.status<300?h(JSON.parse(a.responseText)):u({status:a.status,statusText:a.statusText,responseText:a.responseText}))},a.upload.onprogress=r||null,n&&(n.cancel=()=>{a.abort(),u({status:499,statusText:"Request cancelled."})}),a.open(s,t,!0),a.responseType="text",Object.keys(i).forEach(b=>a.setRequestHeader(b,i[b])),o&&(a.timeout=o,a.ontimeout=()=>{u({status:408,statusText:"Request timeout."})}),a.send(l)});return c.cancel=()=>a.abort(),c}const Ss={name:"filemanager",components:{FolderTree:q,sortable:U,"circular-progress":A,confirm:W,alert:K,"file-edit-form":ys,"folder-edit-form":Bs,"filemanager-add":tt,"filemanager-search":kt,"filemanager-actions":lt,"filemanager-breadcrumbs":Dt,"filemanager-folder-tree":q},data(){return{currentFolder:null,files:[],folders:[],breadcrumbs:[],toRename:null,showAddActivities:!1,indicateDrag:!1,upload:{files:[],progressing:!1,cancelToken:{}},progress:{total:null,loaded:null,file:null},showFileForm:!1,showFolderForm:!1,editFormData:{},editMetaData:{}}},computed:{directoryEntries(){let t=this.folders,s=this.files;return t.forEach(i=>{i.isFolder=!0,i.key="d"+i.id}),s.forEach(i=>i.key=i.id),[...t,...s]},checkedFiles(){return this.files.filter(({checked:t})=>t)},checkedFolders(){return this.folders.filter(({checked:t})=>t)}},props:{routes:{type:Object,required:!0},limits:{type:Object,default:()=>({})},columns:{type:Array,required:!0},folder:{type:String,default:""},initSort:Object},watch:{folder(t){this.currentFolder=t}},async created(){let t=await g(_.create(this.routes.init,{folder:this.folder}));this.breadcrumbs=t.breadcrumbs||[],this.files=t.files||[],this.folders=t.folders||[],this.currentFolder=t.currentFolder||null},mounted(){document.body.addEventListener("click",this.handleBodyClick)},beforeUnmount(){document.body.removeEventListener("click",this.handleBodyClick)},methods:{handleBodyClick(){this.showAddActivities=!1},async readFolder(t){let s=await g(_.create(this.routes.readFolder,{folder:t}));s.success&&(this.files=s.files||[],this.folders=s.folders||[],this.currentFolder=t,s.breadcrumbs&&(this.breadcrumbs=s.breadcrumbs))},async delSelection(){let t=await g(_.create(this.routes.delSelection,{files:this.checkedFiles.map(({id:s})=>s).join(","),folders:this.checkedFolders.map(({id:s})=>s).join(",")}),"DELETE");t.success?(this.files=t.files||[],this.folders=t.folders||[]):t.error&&(this.$emit("response-received",t),this.files=t.files||this.files,this.folders=t.folders||this.folders)},async moveSelection(){let t=await this.$refs["folder-tree"].open(this.routes.getFoldersTree,this.currentFolder);if(t!==!1){let s=await g(_.create(this.routes.moveSelection,{destination:t.id}),"POST",{},JSON.stringify({files:this.checkedFiles.map(({id:i})=>i),folders:this.checkedFolders.map(({id:i})=>i)}));s.success?(this.files=s.files||[],this.folders=s.folders||[]):s.error&&(this.$emit("response-received",s),this.files=s.files||this.files,this.folders=s.folders||this.folders)}},async editFile(t){this.showFileForm=!0;let s=await g(_.create(this.routes.getFile,{id:t.id}));this.editFormData=s.form||{},this.editMetaData=s.fileInfo||{},this.editFormData.id=t.id},async editFolder(t){this.showFolderForm=!0;let s=await g(_.create(this.routes.getFolder,{id:t.id}));this.editFormData=s.form||{},this.editMetaData=s.folderInfo||{},this.editFormData.id=t.id},async delFile(t){await this.$refs.confirm.open("Datei löschen","'"+t.name+"' wirklich löschen?")&&(await g(_.create(this.routes.delFile,{id:t.id}),"DELETE")).success&&this.files.splice(this.files.findIndex(i=>t===i),1)},async renameFile(t){let s=t.target.value.trim();if(s&&this.toRename){let i=await g(this.routes.renameFile,"POST",{},JSON.stringify({name:s,id:this.toRename.id}));i.success&&(this.toRename.name=i.name||s,this.toRename=null)}},async renameFolder(t){let s=t.target.value.trim();if(s&&this.toRename){let i=await g(this.routes.renameFolder,"POST",{},JSON.stringify({name:s,folder:this.toRename.id}));i.success&&(this.toRename.name=i.name||s,this.toRename=null)}},async delFolder(t){await this.$refs.confirm.open("Verzeichnis löschen","'"+t.name+"' und enthaltene Dateien wirklich löschen?",{cancelLabel:"Abbrechen"})&&(await g(_.create(this.routes.delFolder,{folder:t.id}),"DELETE")).success&&this.folders.splice(this.folders.findIndex(i=>t===i),1)},async createFolder(t){this.showAddActivities=!1;let s=await g(this.routes.addFolder,"POST",{},JSON.stringify({name:t,parent:this.currentFolder}));s.folder&&this.folders.push(s.folder)},async moveFile(t){let s=await this.$refs["folder-tree"].open(this.routes.getFoldersTree,this.currentFolder);if(s!==!1){let i=await g(this.routes.moveFile,"POST",{},JSON.stringify({id:t.id,folderId:s.id}));i.success?this.files.splice(this.files.findIndex(l=>t===l),1):this.$emit("response-received",i)}},uploadDraggedFiles(t){this.indicateDrag=!1,this.uploadInputFiles(t.dataTransfer.files||[])},uploadInputFiles(t){this.showAddActivities=!1,this.upload.files.push(...t),this.upload.progressing||(this.upload.progressing=!0,this.progress.loaded=0,this.handleUploads())},async handleUploads(){let t=null,s=null;for(;(t=this.upload.files.shift())!==void 0;){if(this.limits.maxUploadFilesize&&this.limits.maxUploadFilesize<t.size){await this.$refs.alert.open("Datei zu groß","'"+t.name+"' übersteigt die maximale Uploadgröße.");continue}this.progress.file=t.name;try{s=await H(_.create(this.routes.uploadFile,{folder:this.currentFolder}),"POST",{"Content-type":t.type||"application/octet-stream","X-File-Name":t.name.replace(/[^\x00-\x7F]/g,i=>encodeURIComponent(i)),"X-File-Size":t.size,"X-File-Type":t.type},t,null,i=>{this.progress.total=i.total,this.progress.loaded=i.loaded},this.upload.cancelToken),this.files=s.files||this.files}catch{this.upload.files=[],this.upload.progressing=!1;return}if(!s.success){this.$emit("response-received",s),this.upload.files=[],this.upload.progressing=!1;return}}this.upload.progressing=!1,s&&this.$emit("response-received",{success:!0,message:s.message||"File upload successful"})},cancelUpload(){this.upload.cancelToken.cancel&&(this.upload.cancelToken.cancel(),this.upload.cancelToken={})},doSearch(t){return t.trim().length>2?g(_.create(this.routes.search,{search:t})):{files:[],folders:[]}},formatFilesize:I},directives:{focus:T,checkIndeterminate:{updated(t,s,i){let l=s.instance.checkedFolders.length+s.instance.checkedFiles.length;l||(t.checked=!1),t.indeterminate=l&&l!==s.instance.folders.length+s.instance.files.length}}}},Fs={class:"vx-button-bar navbar"},$s={class:"navbar-section"},Ts={class:"popup-container"},Is={class:"card"},Ps={class:"card-body"},Os={class:"navbar-section"},Ms={class:"d-inline-block mr-2"},Rs={key:1,class:"text-primary d-block col-12 text-center"},Ls={class:"navbar-section"},As={class:"with-webfont-icon-left","data-icon":""},zs=["href","onClick"],Us={class:"with-webfont-icon-left","data-icon":""},js=e.createElementVNode("br",null,null,-1),qs=["href","onClick"],Ws={class:"form-checkbox"},Ks=e.createElementVNode("i",{class:"form-icon"},null,-1),Hs={class:"form-checkbox"},Js=["onUpdate:modelValue"],Gs=e.createElementVNode("i",{class:"form-icon"},null,-1),Ys=["value"],Xs=["href","onClick"],Qs=["onClick"],Zs=["value"],vs=["onClick"],ei=["src"],ti={key:1},si={key:0,class:"modal active"},ii=e.createElementVNode("div",{class:"modal-overlay"},null,-1),ni={class:"modal-container"},oi={class:"modal-header"},ri={class:"modal-body"};function li(t,s,i,l,o,r){const n=e.resolveComponent("filemanager-breadcrumbs"),a=e.resolveComponent("filemanager-add"),c=e.resolveComponent("filemanager-actions"),h=e.resolveComponent("circular-progress"),u=e.resolveComponent("filemanager-search"),b=e.resolveComponent("sortable"),f=e.resolveComponent("file-edit-form"),y=e.resolveComponent("folder-edit-form"),p=e.resolveComponent("confirm"),w=e.resolveComponent("alert"),B=e.resolveComponent("folder-tree"),Uo=e.resolveDirective("check-indeterminate"),le=e.resolveDirective("focus");return e.openBlock(),e.createElementBlock("div",{onDrop:s[13]||(s[13]=e.withModifiers((...d)=>r.uploadDraggedFiles&&r.uploadDraggedFiles(...d),["prevent"])),onDragover:s[14]||(s[14]=e.withModifiers(d=>o.indicateDrag=!0,["prevent"])),onDragleave:s[15]||(s[15]=e.withModifiers(d=>o.indicateDrag=!1,["prevent"])),class:e.normalizeClass({"dragged-over":o.indicateDrag})},[e.createElementVNode("div",Fs,[e.createElementVNode("section",$s,[e.createVNode(n,{breadcrumbs:o.breadcrumbs,"current-folder":o.currentFolder,folders:o.folders,onBreadcrumbClicked:r.readFolder},null,8,["breadcrumbs","current-folder","folders","onBreadcrumbClicked"]),e.createElementVNode("div",{class:e.normalizeClass(["popup popup-bottom ml-1",{active:o.showAddActivities}])},[e.createElementVNode("button",{class:"btn webfont-icon-only",type:"button",onClick:s[0]||(s[0]=e.withModifiers(d=>o.showAddActivities=!o.showAddActivities,["stop"]))},"  "),e.createElementVNode("div",Ts,[e.createElementVNode("div",Is,[e.createElementVNode("div",Ps,[e.createVNode(a,{onUpload:r.uploadInputFiles,onCreateFolder:r.createFolder},null,8,["onUpload","onCreateFolder"])])])])],2),e.createVNode(c,{onDeleteSelection:r.delSelection,onMoveSelection:r.moveSelection,files:r.checkedFiles,folders:r.checkedFolders},null,8,["onDeleteSelection","onMoveSelection","files","folders"])]),e.createElementVNode("section",Os,[o.upload.progressing?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("button",{class:"btn btn-link webfont-icon-only tooltip","data-tooltip":"Abbrechen",type:"button",onClick:s[1]||(s[1]=(...d)=>r.cancelUpload&&r.cancelUpload(...d))}," "),e.createElementVNode("label",Ms,e.toDisplayString(o.progress.file),1),e.createVNode(h,{progress:100*o.progress.loaded/(o.progress.total||1),radius:16},null,8,["progress"])],64)):(e.openBlock(),e.createElementBlock("strong",Rs,"Dateien zum Upload hierher ziehen"))]),e.createElementVNode("section",Ls,[e.createVNode(u,{search:r.doSearch},{folder:e.withCtx(d=>[e.createElementVNode("span",As,[e.createElementVNode("a",{href:"#"+d.folder.id,onClick:e.withModifiers(k=>r.readFolder(d.folder.id),["prevent"])},e.toDisplayString(d.folder.name),9,zs)])]),file:e.withCtx(d=>[e.createElementVNode("span",Us,e.toDisplayString(d.file.name)+" ("+e.toDisplayString(d.file.type)+")",1),js,e.createElementVNode("a",{href:"#"+d.file.folder,onClick:e.withModifiers(k=>r.readFolder(d.file.folder),["prevent"])},e.toDisplayString(d.file.path),9,qs)]),_:1},8,["search"])])]),e.createVNode(b,{rows:r.directoryEntries,columns:i.columns,"sort-prop":i.initSort.column,"sort-direction":i.initSort.dir,onAfterSort:s[9]||(s[9]=d=>t.$emit("after-sort",{sortColumn:t.$refs.sortable.sortColumn,sortDir:t.$refs.sortable.sortDir})),ref:"sortable",id:"files-list"},e.createSlots({"checked-header":e.withCtx(()=>[e.createElementVNode("label",Ws,[e.withDirectives(e.createElementVNode("input",{type:"checkbox",onClick:s[2]||(s[2]=d=>{[...o.folders,...o.files].forEach(k=>k.checked=d.target.checked)})},null,512),[[Uo]]),Ks])]),checked:e.withCtx(d=>[e.createElementVNode("label",Hs,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":k=>d.row.checked=k},null,8,Js),[[e.vModelCheckbox,d.row.checked]]),Gs])]),name:e.withCtx(d=>[d.row.isFolder?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[d.row===o.toRename?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,class:"form-input",value:d.row.name,onKeydown:[s[3]||(s[3]=e.withKeys((...k)=>r.renameFolder&&r.renameFolder(...k),["enter"])),s[4]||(s[4]=e.withKeys(k=>o.toRename=null,["esc"]))],onBlur:s[5]||(s[5]=k=>o.toRename=null)},null,40,Ys)),[[le]]):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("a",{href:"#"+d.row.id,onClick:e.withModifiers(k=>r.readFolder(d.row.id),["prevent"])},e.toDisplayString(d.row.name),9,Xs),e.createElementVNode("button",{class:"btn webfont-icon-only tooltip mr-1 rename display-only-on-hover ml-2","data-tooltip":"Umbenennen",onClick:k=>o.toRename=d.row}," ",8,Qs)],64))],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[d.row===o.toRename?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,class:"form-input",value:d.row.name,onKeydown:[s[6]||(s[6]=e.withKeys((...k)=>r.renameFile&&r.renameFile(...k),["enter"])),s[7]||(s[7]=e.withKeys(k=>o.toRename=null,["esc"]))],onBlur:s[8]||(s[8]=k=>o.toRename=null)},null,40,Zs)),[[le]]):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("span",null,e.toDisplayString(d.row.name),1),e.createElementVNode("button",{class:"btn webfont-icon-only tooltip mr-1 rename display-only-on-hover ml-2","data-tooltip":"Umbenennen",onClick:k=>o.toRename=d.row}," ",8,vs)],64))],64))]),size:e.withCtx(d=>[d.row.isFolder?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(r.formatFilesize(d.row.size,",")),1)],64))]),type:e.withCtx(d=>[d.row.image?(e.openBlock(),e.createElementBlock("img",{key:0,src:d.row.src,alt:""},null,8,ei)):(e.openBlock(),e.createElementBlock("span",ti,e.toDisplayString(d.row.type),1))]),_:2},[e.renderList(t.$slots,(d,k)=>({name:k,fn:e.withCtx(jo=>[e.renderSlot(t.$slots,k,e.normalizeProps(e.guardReactiveProps(jo)))])}))]),1032,["rows","columns","sort-prop","sort-direction"]),o.showFileForm||o.showFolderForm?(e.openBlock(),e.createElementBlock("div",si,[ii,e.createElementVNode("div",ni,[e.createElementVNode("div",oi,[e.createElementVNode("a",{href:"#close",class:"btn btn-clear float-right","aria-label":"Close",onClick:s[10]||(s[10]=e.withModifiers(d=>o.showFileForm=o.showFolderForm=!1,["prevent"]))})]),e.createElementVNode("div",ri,[o.showFileForm?(e.openBlock(),e.createBlock(f,{key:0,"initial-data":o.editFormData,"file-info":o.editMetaData,url:i.routes.updateFile,onResponseReceived:s[11]||(s[11]=d=>t.$emit("response-received",d))},null,8,["initial-data","file-info","url"])):e.createCommentVNode("",!0),o.showFolderForm?(e.openBlock(),e.createBlock(y,{key:1,"initial-data":o.editFormData,"folder-info":o.editMetaData,url:i.routes.updateFolder,onResponseReceived:s[12]||(s[12]=d=>t.$emit("response-received",d))},null,8,["initial-data","folder-info","url"])):e.createCommentVNode("",!0)])])])):e.createCommentVNode("",!0),e.createVNode(p,{ref:"confirm",config:{cancelLabel:"Abbrechen",okLabel:"Löschen",okClass:"btn-error"}},null,512),e.createVNode(w,{ref:"alert",config:{label:"Ok",buttonClass:"btn-error"}},null,512),e.createVNode(B,{ref:"folder-tree"},null,512)],34)}const ai=m(Ss,[["render",li]]),ci={name:"tab",emits:["update:active-index"],props:{items:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},block:{type:Boolean,default:!1}},data(){return{activeTab:{}}},computed:{hasActionSlot(){return!!this.$slots.action}},created(){this.activeTab=this.items[this.activeIndex]||{}},watch:{activeIndex(t){this.activeTab=this.items[t]||{}}},methods:{itemOnClick(t){t.disabled||(this.activeTab=t,this.$emit("update:active-index",this.items.indexOf(t)))}}},di=["data-badge","onClick"],hi={key:0,class:"tab-item tab-action"};function mi(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",null,[i.items.length?(e.openBlock(),e.createElementBlock("ul",{key:0,class:e.normalizeClass(["tab",{"tab-block":i.block}])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.items,(n,a)=>(e.openBlock(),e.createElementBlock("li",{key:a,class:e.normalizeClass(["tab-item",{active:i.activeIndex===a}])},[e.createElementVNode("a",{"data-badge":n.badge,onClick:c=>r.itemOnClick(n),class:e.normalizeClass({disabled:n.disabled})},e.toDisplayString(n.name),11,di)],2))),128)),r.hasActionSlot?(e.openBlock(),e.createElementBlock("li",hi,[e.renderSlot(t.$slots,"action")])):e.createCommentVNode("",!0)],2)):e.createCommentVNode("",!0)])}const fi=m(ci,[["render",mi]]),Ho="",pi={name:"password-input",inheritAttrs:!1,props:["modelValue"],emits:["update:modelValue"],data(){return{show:!1}}},ui={class:"form-group is-password"},gi=["value","type"];function bi(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",ui,[e.createElementVNode("input",e.mergeProps(t.$attrs,{value:i.modelValue,class:"form-input",type:o.show?"text":"password",onInput:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.value))}),null,16,gi),e.createElementVNode("a",{class:e.normalizeClass({show:o.show}),href:"#",onClick:s[1]||(s[1]=e.withModifiers(n=>o.show=!o.show,["prevent"]))},null,2)])}const P=m(pi,[["render",bi],["__scopeId","data-v-22d0e6fe"]]);function yi(t){const s=parseInt(t,10);let i=new Date;switch(t.charAt(t.length-1)){case"Y":i.setFullYear(i.getFullYear()+s);break;case"M":i.setMonth(i.getMonth()+s);break;case"D":i.setDate(i.getDate()+s);break;case"h":i.setHours(i.getHours()+s);break;case"m":i.setMinutes(i.getMinutes()+s);break;case"s":i.setSeconds(i.getSeconds()+s);break;default:i=new Date(t)}return i}function ki(t){let s="";return Object.getOwnPropertyNames(t).forEach(i=>{if(/^expires$/i.test(i)){let l=t[i];typeof l!="object"&&(l+=typeof l=="number"?"D":"",l=yi(l)),s+=";"+i+"="+l.toUTCString()}else/^secure$/.test(i)?t[i]&&(s+=";"+i):s+=";"+i+"="+t[i]}),t.hasOwnProperty("path")||(s+=";path=/"),s}function J(t){const s=wi(t);return s?decodeURIComponent(s):null}function F(t,s,i={}){document.cookie=t+"="+encodeURIComponent(s)+ki(i)}function _i(t,s={}){return F(t,"x",{...s,expires:-1})}function wi(t){if(!t||typeof t!="string")return null;const s=t.replace(/[.*+?^$|[\](){}\\-]/g,"\\$&"),i=new RegExp("(?:^|; )"+s+"(?:=([^;]*))?(?:;|$)").exec(document.cookie);return i===null?null:i[1]}const Ei={name:"cookie-consent",emits:["accept","decline","revoke"],props:{buttonText:{type:String,default:"Ok"},buttonDecline:{type:Boolean,default:!1},buttonDeclineText:{type:String,default:"Decline"},buttonLink:{type:String,required:!1},buttonLinkText:{type:String,default:"More info"},buttonLinkNewTab:{type:Boolean,default:!0},message:{type:String,default:"This website uses cookies to ensure you get the best experience on our website."},position:{type:String,default:"bottom"},transitionName:{type:String,default:"fade"},storageName:{type:String,default:"cookie:accepted"},cookieOptions:{type:Object,default:()=>({}),required:!1}},data(){return{isOpen:!1}},computed:{containerPosition(){return this.position},target(){return this.buttonLinkNewTab?"_blank":"_self"}},created(){this.getVisited()||(this.isOpen=!0)},mounted(){this.isAccepted()&&this.$emit("accept")},methods:{setVisited(){F(this.storageName,!0,{...this.cookieOptions,expires:"1Y"})},getVisited(){let t=!1;return t=J(this.storageName),typeof t=="string"&&(t=JSON.parse(t)),t!=null},isAccepted(){let t=!1;return t=J(this.storageName),typeof t=="string"&&(t=JSON.parse(t)),t},accept(){F(this.storageName,!0,{...this.cookieOptions,expires:"1Y"}),this.setVisited(),this.isOpen=!1,this.$emit("accept")},decline(){F(this.storageName,!1,{...this.cookieOptions,expires:"1Y"}),this.setVisited(),this.isOpen=!1,this.$emit("decline")},revoke(){_i(this.storageName),this.isOpen=!0,this.$emit("revoke")},open(){this.getVisited()||(this.isOpen=!0)},close(){this.isOpen=!1,this.$emit("close")}}},xi={class:"content"},Di={class:"buttons"},Ci=["target","href"];function Ni(t,s,i,l,o,r){return e.openBlock(),e.createBlock(e.Transition,{appear:"",name:i.transitionName},{default:e.withCtx(()=>[o.isOpen?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cookie-consent",r.containerPosition])},[e.renderSlot(t.$slots,"default",{accept:r.accept,close:r.close,decline:r.decline,open:r.open},()=>[e.createElementVNode("div",xi,[e.renderSlot(t.$slots,"message",{},()=>[e.createTextVNode(e.toDisplayString(i.message),1)])]),e.createElementVNode("div",Di,[i.buttonLink?(e.openBlock(),e.createElementBlock("a",{key:0,target:r.target,href:i.buttonLink,class:"btn-link"},e.toDisplayString(i.buttonLinkText),9,Ci)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:s[0]||(s[0]=(...n)=>r.accept&&r.accept(...n)),class:"btn-accept"},e.toDisplayString(i.buttonText),1),i.buttonDecline?(e.openBlock(),e.createElementBlock("button",{key:1,onClick:s[1]||(s[1]=(...n)=>r.decline&&r.decline(...n)),class:"btn-decline"},e.toDisplayString(i.buttonDeclineText),1)):e.createCommentVNode("",!0)])])],2)):e.createCommentVNode("",!0)]),_:3},8,["name"])}const Vi=m(Ei,[["render",Ni]]),Bi={name:"pagination",emits:["update:page","update:total"],props:{items:Array,total:{type:Number,default:1},page:{type:Number,default:1},perPage:{type:Number,default:20},showNavButtons:{type:Boolean,default:!0},prevText:{type:String,default:"Previous"},nextText:{type:String,default:"Next"},showAllPages:{type:Boolean,default:!1},onPageChange:Function},data(){return{currentPage:1,maxPage:0,showPerPage:20,dataItems:void 0}},created(){this.currentPage=this.page,this.totalResults=this.total,this.showPerPage=this.perPage,typeof this.items<"u"&&(this.dataItems=this.items,this.totalResults=this.items.length),this.countMaxPage(),typeof this.onPageChange=="function"&&this.onPageChange.apply(null,[this.currentPage,this.dataResults,this.maxPage])},methods:{pageClick(t){this.currentPage=t,this.$emit("update:page",t),typeof this.onPageChange=="function"&&this.onPageChange.apply(null,[t,this.dataResults,this.maxPage])},prevPage(){this.currentPage>1&&this.pageClick(this.currentPage-1)},nextPage(){this.currentPage<this.maxPage&&this.pageClick(this.currentPage+1)},countMaxPage(){this.maxPage=Math.ceil(this.totalResults/this.showPerPage)}},watch:{page(t){t<1?t=1:t>this.maxPage&&(t=this.maxPage),this.currentPage=t,typeof this.onPageChange=="function"&&this.onPageChange.apply(null,[this.currentPage,this.dataResults,this.maxPage])},total(t){t<0&&(t=0),this.totalResults=t,this.countMaxPage(),this.pageClick(1)},perPage(t){t<1&&(t=20),this.showPerPage=t,this.countMaxPage(),this.pageClick(1)},items(t){this.dataItems=t,this.totalResults=this.dataItems.length,this.$emit("update:total",this.totalResults),this.countMaxPage(),this.pageClick(1)}},computed:{dataResults(){if(typeof this.dataItems<"u"&&this.dataItems.length>0){let t=(this.currentPage-1)*this.showPerPage,s=this.currentPage*this.showPerPage;return this.dataItems.slice(t,s)}return null},pagesToShow(){let t=[1];if(this.showAllPages===!0||this.maxPage<=7){let s=2;for(;s<=this.maxPage;++s)t.push(s);return t}return this.currentPage>=this.maxPage?(t.push("dots"),t.push(this.currentPage-2),t.push(this.currentPage-1)):this.currentPage-1&&this.currentPage-1>1&&(this.currentPage-1>2&&t.push("dots"),t.push(this.currentPage-1)),this.currentPage>1&&t.push(this.currentPage),this.currentPage+1<this.maxPage&&(t.push(this.currentPage+1),this.currentPage<=1&&t.push(this.currentPage+2),this.currentPage+2<this.maxPage&&t.push("dots")),this.currentPage<this.maxPage&&t.push(this.maxPage),t}}},Si={class:"pagination"},Fi=["onClick"],$i={key:1};function Ti(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("ul",Si,[i.showNavButtons?(e.openBlock(),e.createElementBlock("li",{key:0,class:e.normalizeClass(["page-item",{disabled:o.currentPage<=1}])},[e.createElementVNode("a",{tabindex:"-1",onClick:s[0]||(s[0]=(...n)=>r.prevPage&&r.prevPage(...n)),class:"menu-item"},e.toDisplayString(i.prevText),1)],2)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.pagesToShow,(n,a)=>(e.openBlock(),e.createElementBlock("li",{key:a,class:e.normalizeClass(["page-item",{active:o.currentPage===n}])},[n!=="dots"?(e.openBlock(),e.createElementBlock("a",{key:0,onClick:c=>r.pageClick(n)},e.toDisplayString(n),9,Fi)):(e.openBlock(),e.createElementBlock("span",$i,"…"))],2))),128)),i.showNavButtons?(e.openBlock(),e.createElementBlock("li",{key:1,class:e.normalizeClass(["page-item",{disabled:o.currentPage>=o.maxPage}])},[e.createElementVNode("a",{tabindex:"-1",onClick:s[1]||(s[1]=(...n)=>r.nextPage&&r.nextPage(...n))},e.toDisplayString(i.nextText),1)],2)):e.createCommentVNode("",!0)])])}const Ii=m(Bi,[["render",Ti]]);let G=new Date().getTime();const Pi={name:"vue-ckeditor",emits:["blur","focus","contentDom","dialogDefinition","fileUploadRequest","fileUploadResponse","update:modelValue"],props:{modelValue:String,name:{type:String,default:`editor-${++G}`},id:{type:String,default:`editor-${G}`},types:{type:String,default:"classic"},config:{type:Object,default:{}},instanceReadyCallback:Function,readOnlyMode:{type:Boolean,default:!1}},data:()=>({instanceValue:""}),computed:{instance(){return CKEDITOR.instances[this.id]}},watch:{modelValue(t){try{this.instance&&this.update(t)}catch{}},readOnlyMode(t){this.instance.setReadOnly(t)}},mounted(){typeof CKEDITOR>"u"?console.log("CKEDITOR is missing (http://ckeditor.com/)"):(this.types==="inline"?CKEDITOR.inline(this.id,this.config):CKEDITOR.replace(this.id,this.config),this.instance.setData(this.modelValue),this.instance.on("instanceReady",()=>{this.instance.setData(this.modelValue)}),this.instance.on("change",this.onChange),this.instance.on("mode",this.onMode),this.instance.on("blur",t=>{this.$emit("blur",t)}),this.instance.on("focus",t=>{this.$emit("focus",t)}),this.instance.on("contentDom",t=>{this.$emit("contentDom",t)}),CKEDITOR.on("dialogDefinition",t=>{this.$emit("dialogDefinition",t)}),this.instance.on("fileUploadRequest",t=>{this.$emit("fileUploadRequest",t)}),this.instance.on("fileUploadResponse",t=>{this.$nextTick(()=>{this.onChange()}),this.$emit("fileUploadResponse",t)}),typeof this.instanceReadyCallback<"u"&&this.instance.on("instanceReady",this.instanceReadyCallback))},beforeUnmount(){try{let t=window.CKEDITOR;t.instances&&t.instances[this.id]&&t.instances[this.id].destroy()}catch{}},methods:{update(t){this.instanceValue!==t&&(this.instance.setData(t,{internal:!1}),this.instanceValue=t)},onMode(){if(this.instance.mode==="source"){let t=this.instance.editable();t.attachListener(t,"input",()=>{this.onChange()})}},onChange(){let t=this.instance.getData();t!==this.modelValue&&(this.$emit("update:modelValue",t),this.instanceValue=t)}}},Oi={class:"ckeditor"},Mi=["name","id","value","types","config","disabled"];function Ri(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("div",Oi,[e.createElementVNode("textarea",{name:i.name,id:i.id,value:i.modelValue,types:i.types,config:i.config,disabled:i.readOnlyMode},`
    `,8,Mi)])}const O=m(Pi,[["render",Ri]]),Li={components:{"password-input":P,"form-input":S},props:{url:{type:String,required:!0},initialData:{type:Object,default:()=>({})},notifications:{type:Array}},data(){return{form:{},response:{},loading:!1,elements:[{model:"username",label:"Username",attrs:{maxlength:128,autocomplete:"off"},required:!0},{model:"email",label:"E-Mail",attrs:{maxlength:128,autocomplete:"off"},required:!0},{model:"name",label:"Name",attrs:{maxlength:128,autocomplete:"off"},required:!0},{type:"password-input",model:"new_PWD",label:"Neues Passwort",attrs:{maxlength:128,autocomplete:"off"}},{type:"password-input",model:"new_PWD_verify",label:"Passwort wiederholen",attrs:{maxlength:128,autocomplete:"off"}}]}},computed:{errors(){return this.response?this.response.errors||{}:{}},message(){return this.response?this.response.message:""}},watch:{initialData(t){this.form=t}},methods:{async submit(){this.loading=!0,this.$emit("request-sent"),this.response=await g(this.url,"post",{},JSON.stringify(this.form)),this.loading=!1,this.$emit("response-received")}}},Ai={class:"form-sect"},zi={class:"form-sect"},Ui={class:"form-group"},ji=["for"],qi={class:"col-9"},Wi={key:0,class:"form-input-hint vx-error-box error"},Ki=e.createElementVNode("div",{class:"divider text-center","data-content":"Benachrichtigungen"},null,-1),Hi={class:"form-sect off-3"},Ji={class:"form-group"},Gi={class:"form-switch"},Yi=["value"],Xi=e.createElementVNode("i",{class:"form-icon"},null,-1),Qi=e.createElementVNode("div",{class:"divider"},null,-1),Zi={class:"form-base"},vi={class:"form-group off-3"},en=["disabled"];function tn(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("form",{action:"/",class:"form-horizontal",onSubmit:s[2]||(s[2]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",Ai,[e.createElementVNode("div",zi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.elements,n=>(e.openBlock(),e.createElementBlock("div",Ui,[e.createElementVNode("label",{class:e.normalizeClass(["form-label col-3",{required:n.required,"text-error":r.errors[n.model]}]),for:n.model+"_"+n.type},e.toDisplayString(n.label),11,ji),e.createElementVNode("div",qi,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.type||"form-input"),{id:n.model+"_"+n.type,name:n.model,modelValue:o.form[n.model],"onUpdate:modelValue":a=>o.form[n.model]=a},null,8,["id","name","modelValue","onUpdate:modelValue"])),r.errors[n.model]?(e.openBlock(),e.createElementBlock("p",Wi,e.toDisplayString(r.errors[n.model]),1)):e.createCommentVNode("",!0)])]))),256))])]),i.notifications.length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[Ki,e.createElementVNode("div",Hi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.notifications,n=>(e.openBlock(),e.createElementBlock("div",Ji,[e.createElementVNode("label",Gi,[e.withDirectives(e.createElementVNode("input",{name:"notification[]",value:n.alias,type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>o.form.notifications=a)},null,8,Yi),[[e.vModelCheckbox,o.form.notifications]]),Xi,e.createTextVNode(e.toDisplayString(n.label),1)])]))),256))])],64)):e.createCommentVNode("",!0),Qi,e.createElementVNode("div",Zi,[e.createElementVNode("div",vi,[e.createElementVNode("button",{name:"submit_profile",type:"button",class:e.normalizeClass(["btn btn-success",{loading:o.loading}]),disabled:o.loading,onClick:s[1]||(s[1]=(...n)=>r.submit&&r.submit(...n))},"Änderungen speichern",10,en)])])],32)}const sn=m(Li,[["render",tn]]),nn={name:"form-select",props:{options:Array,modelValue:[String,Number]},emits:["update:modelValue"]},on=["value"],rn=["value","selected"];function ln(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("select",e.mergeProps(t.$attrs,{value:i.modelValue,class:"form-select",onChange:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.value))}),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.options,n=>(e.openBlock(),e.createElementBlock("option",{value:n.key||n.label||n,selected:(n.key||n.label||n)==i.modelValue},e.toDisplayString(n.label||n),9,rn))),256))],16,on)}const Y=m(nn,[["render",ln]]),an={components:{"password-input":P,"form-input":S,"form-select":Y},props:{url:{type:String,required:!0},initialData:{type:Object,default:()=>({})},options:Object},data:()=>({form:{},response:{},loading:!1,elements:[{model:"username",label:"Username",attrs:{maxlength:128,autocomplete:"off"},required:!0},{model:"email",label:"E-Mail",attrs:{maxlength:128,autocomplete:"off"},required:!0},{model:"name",label:"Name",attrs:{maxlength:128,autocomplete:"off"},required:!0},{type:"form-select",model:"admingroupsid",label:"Gruppe",required:!0,options:[]},{type:"password-input",model:"new_PWD",label:"Neues Passwort",attrs:{maxlength:128,autocomplete:"off"}},{type:"password-input",model:"new_PWD_verify",label:"Passwort wiederholen",attrs:{maxlength:128,autocomplete:"off"}}]}),computed:{errors(){return this.response?this.response.errors||{}:{}},message(){return this.response?this.response.message:""}},watch:{initialData(t){this.form=t},options(t){this.elements[this.elements.findIndex(({model:s})=>s==="admingroupsid")].options=t.admingroups}},methods:{async submit(){this.loading=!0,this.$emit("request-sent"),this.response=await g(this.url,"post",{},JSON.stringify(this.form)),this.loading=!1,this.$emit("response-received")}}},cn={class:"form-sect"},dn={class:"form-group"},hn=["for"],mn={class:"col-9"},fn={key:0,class:"form-input-hint vx-error-box error"},pn=e.createElementVNode("div",{class:"divider"},null,-1),un={class:"form-base"},gn={class:"form-group off-3"},bn=["disabled"];function yn(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("form",{action:"/",class:"form-horizontal",onSubmit:s[1]||(s[1]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",cn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.elements,n=>(e.openBlock(),e.createElementBlock("div",dn,[e.createElementVNode("label",{class:e.normalizeClass(["form-label col-3",{required:n.required,"text-error":r.errors[n.model]}]),for:n.model+"_"+n.type},e.toDisplayString(n.label),11,hn),e.createElementVNode("div",mn,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.type||"form-input"),{id:n.model+"_"+n.type,name:n.model,modelValue:t.form[n.model],"onUpdate:modelValue":a=>t.form[n.model]=a,options:n.options},null,8,["id","name","modelValue","onUpdate:modelValue","options"])),r.errors[n.model]?(e.openBlock(),e.createElementBlock("p",fn,e.toDisplayString(r.errors[n.model]),1)):e.createCommentVNode("",!0)])]))),256))]),pn,e.createElementVNode("div",un,[e.createElementVNode("div",gn,[e.createElementVNode("button",{name:"submit_user",type:"button",class:e.normalizeClass(["btn btn-success",{loading:t.loading}]),disabled:t.loading,onClick:s[0]||(s[0]=(...n)=>r.submit&&r.submit(...n))},e.toDisplayString(t.form.id?"Daten übernehmen":"User anlegen"),11,bn)])])],32)}const kn=m(an,[["render",yn]]),_n={name:"form-textarea",props:["modelValue"],emits:["update:modelValue"]},wn=["value"];function En(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("textarea",{value:i.modelValue,class:"form-input",onInput:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.value))},null,40,wn)}const xn=m(_n,[["render",En]]),Dn={name:"form-checkbox",inheritAttrs:!1,props:["modelValue"],emits:["update:modelValue"]},Cn={class:"form-checkbox"},Nn=["checked"],Vn=e.createElementVNode("i",{class:"form-icon"},null,-1);function Bn(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("label",Cn,[e.createElementVNode("input",e.mergeProps({value:"1",type:"checkbox",onChange:s[0]||(s[0]=n=>t.$emit("update:modelValue",n.target.checked))},t.$attrs,{checked:i.modelValue}),null,16,Nn),Vn,e.renderSlot(t.$slots,"default")])}const Sn={components:{"vue-ckeditor":O,datepicker:z,"form-input":S,"form-textarea":xn,"form-select":Y,"form-checkbox":m(Dn,[["render",Bn]])},props:{url:{type:String,required:!0},initialData:{type:Object,default:()=>({})},options:Object,editorConfig:Object},data(){return{elements:[{type:"datepicker",model:"article_date",label:"Artikeldatum",attrs:{"input-format":"d.m.y","output-format":"d.m.y","day-names":"Mo Di Mi Do Fr Sa So".split(" "),"month-names":"Jan Feb Mär Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" ")}},{type:"datepicker",model:"display_from",label:"Anzeige von",attrs:{"input-format":"d.m.y","output-format":"d.m.y","day-names":"Mo Di Mi Do Fr Sa So".split(" "),"month-names":"Jan Feb Mär Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),"valid-from":new Date}},{type:"datepicker",model:"display_until",label:"Anzeige bis",attrs:{"input-format":"d.m.y","output-format":"d.m.y","day-names":"Mo Di Mi Do Fr Sa So".split(" "),"month-names":"Jan Feb Mär Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),"valid-from":new Date}},{model:"customsort",label:"generische Sortierung",attrs:{class:"col-2",maxlength:4}},{type:"form-checkbox",model:"customflags",label:"Markiert"},{type:"form-select",model:"articlecategoriesid",label:"Kategorie",required:!0,options:[]},{model:"headline",label:"Überschrift/Titel",required:!0},{model:"subline",label:"Unterüberschrift"},{type:"form-textarea",model:"teaser",label:"Anrisstext"},{type:"vue-ckeditor",model:"content",label:"Inhalt",required:!0,attrs:{config:this.editorConfig}}],form:{},response:{},loading:!1}},computed:{errors(){return this.response?this.response.errors||{}:{}},message(){return this.response?this.response.message:""}},watch:{initialData(t){this.form=Object.assign({},this.form,t),this.setDates()},options(t){this.elements[this.elements.findIndex(({model:s})=>s==="articlecategoriesid")].options=t.categories}},mounted(){this.form=Object.assign({},this.form,this.initialData),this.setDates()},methods:{async submit(){this.loading=!0;let t=Object.assign({},this.form);Object.keys(t).forEach(s=>{t[s]instanceof Date&&(t[s]=t[s].getFullYear()+"-"+(t[s].getMonth()+1)+"-"+t[s].getDate())}),this.response=await g(this.url,"post",{},JSON.stringify(t)),this.form.id=this.response.id||this.form.id,this.$emit("response-received",this.response),this.loading=!1},setDates(){["article_date","display_from","display_until"].forEach(t=>{this.form[t]&&!(this.form[t]instanceof Date)&&(this.form[t]=new Date(this.form[t]))})}}},Fn={class:"form-group"},$n=["for"],Tn={class:"col-9"},In=e.createElementVNode("div",{class:"divider"},null,-1),Pn={class:"form-group"},On=["disabled"];function Mn(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("form",{action:"/",class:"form-horizontal",onSubmit:s[1]||(s[1]=e.withModifiers(()=>{},["prevent"]))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.elements,n=>(e.openBlock(),e.createElementBlock("div",Fn,[e.createElementVNode("label",{class:e.normalizeClass(["form-label col-3",{required:n.required,"text-error":r.errors[n.model]}]),for:n.model+"_"+n.type},e.toDisplayString(n.label),11,$n),e.createElementVNode("div",Tn,[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.type||"form-input"),e.mergeProps({id:n.model+"_"+n.type,name:n.model,options:n.options,modelValue:o.form[n.model],"onUpdate:modelValue":a=>o.form[n.model]=a},n.attrs),null,16,["id","name","options","modelValue","onUpdate:modelValue"]))])]))),256)),In,e.createElementVNode("div",Pn,[e.createElementVNode("button",{type:"button",onClick:s[0]||(s[0]=(...n)=>r.submit&&r.submit(...n)),class:e.normalizeClass(["btn btn-success off-3 col-3",{loading:o.loading}]),disabled:o.loading},e.toDisplayString(o.form.id?"Daten übernehmen":"Artikel anlegen"),11,On)])],32)}const Rn=m(Sn,[["render",Mn]]),Ln={props:{revisions:{type:Array,default:[]}},computed:{sortedRevisions(){return this.revisions.slice().sort((t,s)=>t.firstCreated<s.firstCreated?1:-1)}},methods:{formatDateTime:C.formatDate}},An={id:"revisions",class:"table table-striped"},zn=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"Angelegt um"),e.createElementVNode("th",{class:"col-2"}),e.createElementVNode("th",{class:"col-2"},"aktiv"),e.createElementVNode("th",{class:"col-2"})])],-1),Un=["onClick"],jn={class:"form-switch"},qn=["checked","disabled","onClick"],Wn=e.createElementVNode("i",{class:"form-icon"},null,-1),Kn={class:"text-right"},Hn=["onClick"];function Jn(t,s,i,l,o,r){return e.openBlock(),e.createElementBlock("table",An,[zn,e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.sortedRevisions,n=>(e.openBlock(),e.createElementBlock("tr",{key:n.id},[e.createElementVNode("td",null,e.toDisplayString(r.formatDateTime(n.firstCreated,"y-mm-dd h:i:s")),1),e.createElementVNode("td",null,[e.createElementVNode("button",{class:"btn btn-link webfont-icon-only tooltip",type:"button","data-tooltip":"Ansicht",onClick:a=>t.$emit("load-revision",n)},"",8,Un)]),e.createElementVNode("td",null,[e.createElementVNode("label",jn,[e.createElementVNode("input",{type:"checkbox",checked:n.active,disabled:n.active,onClick:a=>t.$emit("activate-revision",n)},null,8,qn),Wn])]),e.createElementVNode("td",Kn,[n.active?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-primary webfont-icon-only tooltip tooltip-left",type:"button","data-tooltip":"Löschen",onClick:a=>t.$emit("delete-revision",n)},"",8,Hn))])]))),128))])])}const Gn={name:"page-form",components:{"vue-ckeditor":O,"revision-table":m(Ln,[["render",Jn]])},props:{mode:{type:String,default:"edit"},url:{type:String,required:!0},formData:{type:Object,default:()=>{}},revisionsData:{type:Array,default:()=>{}}},data:()=>({form:{},revisions:[],response:{},loading:!1,editorConfig:{allowedContent:!0,autoParagraph:!1,customConfig:"",toolbar:[["Maximize","-","Source"],["Undo","Redo","-","Cut","Copy","Paste","PasteText","PasteFromWord"],["Find","Replace"],["Bold","Italic","Subscript","Superscript","-","CopyFormatting","RemoveFormat","-","TextColor","BGColor"],["NumberedList","BulletedList","-","Blockquote"],["Link","Unlink"],["Image","Table","SpecialChar"],["Styles","Format"],["ShowBlocks"]],height:"24rem",contentsCss:["/css/site.css","/css/site_edit.css"],filebrowserBrowseUrl:null,filebrowserImageBrowseUrl:null}}),computed:{errors(){return this.response?this.response.errors||{}:{}},message(){return this.response?this.response.message:""}},watch:{formData(t){this.form=Object.assign({},this.form,t)},revisionsData(t){this.revisions=t.slice()}},created(){this.editorConfig.filebrowserBrowseUrl=this.$parent.$options.routes.fileBrowse,this.editorConfig.filebrowserImageBrowseUrl=this.$parent.$options.routes.fileBrowse+"?filter=image"},methods:{async submit(){this.loading=!0,this.$emit("request-sent"),this.response=await g(this.url,"post",{},JSON.stringify(this.form)),this.loading=!1,this.$emit("response-received",this.response)}}},Yn={class:"columns"},Xn={class:"column col-8"},Qn={class:"form-group"},Zn=e.createElementVNode("label",{class:"form-label",for:"alias_input"},"Eindeutiger Name",-1),vn=["value","disabled"],eo={key:0,class:"form-input-hint vx-error-box error"},to={class:"form-group"},so=e.createElementVNode("label",{class:"form-label",for:"title_input"},"Titel",-1),io={key:0,class:"form-input-hint vx-error-box error"},no={class:"form-group"},oo=e.createElementVNode("label",{class:"form-label"},"Inhalt",-1),ro={class:"column col-4"},lo={class:"form-group"},ao=e.createElementVNode("label",{class:"form-label",for:"keywords_input"},"Schlüsselwörter",-1),co={class:"form-group"},ho=e.createElementVNode("label",{class:"form-label",for:"description_input"},"Beschreibung",-1),mo=e.createElementVNode("div",{class:"divider","data-content":"Revisionen"},null,-1),fo={id:"revisionsContainer"},po=e.createElementVNode("div",{class:"divider"},null,-1),uo={class:"form-base"},go={class:"form-group"},bo=["disabled"];function yo(t,s,i,l,o,r){const n=e.resolveComponent("vue-ckeditor"),a=e.resolveComponent("revision-table");return e.openBlock(),e.createElementBlock("form",{action:"/",onSubmit:s[9]||(s[9]=e.withModifiers(()=>{},["prevent"]))},[e.createElementVNode("div",Yn,[e.createElementVNode("div",Xn,[e.createElementVNode("div",Qn,[Zn,e.createElementVNode("input",{id:"alias_input",value:t.form.alias,onInput:s[0]||(s[0]=c=>t.form.alias=c.target.value.toUpperCase()),class:"form-input",disabled:i.mode==="edit",maxlength:"64"},null,40,vn),r.errors.alias?(e.openBlock(),e.createElementBlock("p",eo,e.toDisplayString(r.errors.alias),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",to,[so,e.withDirectives(e.createElementVNode("input",{id:"title_input","onUpdate:modelValue":s[1]||(s[1]=c=>t.form.title=c),class:"form-input",maxlength:"128"},null,512),[[e.vModelText,t.form.title]]),r.errors.title?(e.openBlock(),e.createElementBlock("p",io,e.toDisplayString(r.errors.title),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",no,[oo,e.createVNode(n,{modelValue:t.form.markup,"onUpdate:modelValue":s[2]||(s[2]=c=>t.form.markup=c),config:t.editorConfig},null,8,["modelValue","config"])])]),e.createElementVNode("div",ro,[e.createElementVNode("div",lo,[ao,e.withDirectives(e.createElementVNode("textarea",{id:"keywords_input",class:"form-input",rows:"4","onUpdate:modelValue":s[3]||(s[3]=c=>t.form.keywords=c)},null,512),[[e.vModelText,t.form.keywords]])]),e.createElementVNode("div",co,[ho,e.withDirectives(e.createElementVNode("textarea",{id:"description_input",class:"form-input",rows:"4","onUpdate:modelValue":s[4]||(s[4]=c=>t.form.description=c)},null,512),[[e.vModelText,t.form.description]])]),mo,e.createElementVNode("div",fo,[e.createVNode(a,{revisions:t.revisions,onActivateRevision:s[5]||(s[5]=c=>t.$emit("activate-revision",c)),onLoadRevision:s[6]||(s[6]=c=>t.$emit("load-revision",c)),onDeleteRevision:s[7]||(s[7]=c=>t.$emit("delete-revision",c))},null,8,["revisions"])])])]),po,e.createElementVNode("div",uo,[e.createElementVNode("div",go,[e.createElementVNode("button",{name:"submit_page",type:"button",class:e.normalizeClass(["btn btn-success",{loading:t.loading}]),disabled:t.loading,onClick:s[8]||(s[8]=(...c)=>r.submit&&r.submit(...c))},"Änderungen übernehmen und neue Revision erzeugen",10,bo)])])],32)}const ko=m(Gn,[["render",yo]]),_o=e.defineComponent({inject:["manager"],props:{index:{type:Number,required:!0},disabled:{type:Boolean,default:!1}},data(){return{}},watch:{index(t){this.$el&&this.$el.sortableInfo&&(this.$el.sortableInfo.index=t)},disabled(t){t?this.removeDraggable():this.setDraggable(this.index)}},mounted(){const{disabled:t,index:s}=this.$props;t||this.setDraggable(s)},beforeUnmount(){this.disabled||this.removeDraggable()},methods:{setDraggable(t){const s=this.$el;s.sortableInfo={index:t,manager:this.manager},this.ref={node:s},this.manager.add(this.ref)},removeDraggable(){this.manager.remove(this.ref)}}});class wo{constructor(){this.refs=[],this.active=null}add(s){this.refs||(this.refs=[]),this.refs.push(s)}remove(s){const i=this.getIndex(s);i!==-1&&this.refs.splice(i,1)}isActive(){return!!this.active}getActive(){return this.refs.find(({node:s})=>{var i,l;return((i=s==null?void 0:s.sortableInfo)===null||i===void 0?void 0:i.index)==((l=this===null||this===void 0?void 0:this.active)===null||l===void 0?void 0:l.index)})||null}getIndex(s){return this.refs.indexOf(s)}getRefs(){return this.refs}getOrderedRefs(){return this.refs.sort((s,i)=>s.node.sortableInfo.index-i.node.sortableInfo.index)}}const N=t=>t.touches!=null;function M(t,s){return!!t&&Object.prototype.hasOwnProperty.call(t,s)}function Eo(t,s,i){const l=t.slice(0);if(i>=l.length){let o=i-l.length;for(;o--+1;)l.push(void 0)}return l.splice(i,0,l.splice(s,1)[0]),l}function xo(t,s){const i=t.slice(0);return s>=i.length||i.splice(s,1),i}function Do(t,s,i){const l=t.slice(0);return s===l.length?l.push(i):l.splice(s,0,i),l}const x={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","mouseup"],cancel:["touchcancel","keyup"]};function X(t,s){for(;t;){if(s(t))return t;t=t.parentNode}}function Q(t,s,i){return i<t?t:i>s?s:i}function $(t){return t.substr(-2)==="px"?parseFloat(t):0}function Z(t){const s=window.getComputedStyle(t);return{top:$(s.marginTop),right:$(s.marginRight),bottom:$(s.marginBottom),left:$(s.marginLeft)}}function V(t,s="page"){const i=`${s}X`,l=`${s}Y`;return{x:N(t)?t.touches[0][i]:t[i],y:N(t)?t.touches[0][l]:t[l]}}function v(t){const s=[t];for(;t;t=t.offsetParent)s.unshift(t);return s}function Co(t,s){const i=v(t),l=v(s);if(i[0]!=l[0])throw"No common ancestor!";for(let o=0;o<i.length;o++)if(i[o]!=l[o])return i[o-1]}function D(t,s,i={top:0,left:0}){if(t){const l={top:i.top+t.offsetTop,left:i.left+t.offsetLeft};return t.offsetParent!==s.offsetParent?D(t.offsetParent,s,l):l}return{top:0,left:0}}function ee(t){const s=t.querySelectorAll("input, textarea, select"),i=t.cloneNode(!0);return[...i.querySelectorAll("input, textarea, select")].forEach((o,r)=>{o.type!=="file"&&s[r]&&(o.value=s[r].value)}),i}function No(t,s,i){if(typeof t=="string"&&(t=+t),Array.isArray(t)||(t=[t,t]),t.length!==2)throw new Error(`lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given ${t}`);const[l,o]=t;return[te(l,s,i),te(o,s,i)]}function te(t,s,i){let l=t,o=t,r="px";if(typeof t=="string"){const n=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);if(n===null)throw new Error(`lockOffset value should be a number or a string of a number followed by "px" or "%". Given ${t}`);l=o=parseFloat(t),r=n[1]}if(!isFinite(l)||!isFinite(o))throw new Error(`lockOffset value should be a finite. Given ${t}`);return r==="%"&&(l=l*s/100,o=o*i/100),{x:l,y:o}}function Vo(t,s,i,l){const o=t-i,r=s-l;return Math.sqrt(o*o+r*r)}function Bo(t){return{x:t.left+t.width/2,y:t.top+t.height/2}}function se(t=[]){for(let s=0,i=t.length;s<i;s++){const l=t[s],o=l.node;if(!o)return;l.edgeOffset=null,R(o)}}function R(t,s="",i=""){t&&(t.style.transform=s,t.style.transitionDuration=i)}function ie(t,s,i){const l=Math.max(s,i);return Math.min(s,i)<=t&&t<=l}function ne({x:t,y:s},{top:i,left:l,width:o,height:r}){const n=ie(t,l,l+o),a=ie(s,i,i+r);return n&&a}const L=setTimeout,So=e.defineComponent({inject:{SlicksortHub:{from:"SlicksortHub",default:null}},provide(){return{manager:this.manager}},props:{list:{type:Array,required:!0},axis:{type:String,default:"y"},distance:{type:Number,default:0},pressDelay:{type:Number,default:0},pressThreshold:{type:Number,default:5},useDragHandle:{type:Boolean,default:!1},useWindowAsScrollContainer:{type:Boolean,default:!1},hideSortableGhost:{type:Boolean,default:!0},lockToContainerEdges:{type:Boolean,default:!1},lockOffset:{type:[String,Number,Array],default:"50%"},transitionDuration:{type:Number,default:300},appendTo:{type:String,default:"body"},draggedSettlingDuration:{type:Number,default:null},group:{type:String,default:""},accept:{type:[Boolean,Array,Function],default:null},cancelKey:{type:String,default:"Escape"},block:{type:Array,default:()=>[]},lockAxis:{type:String,default:""},helperClass:{type:String,default:""},contentWindow:{type:Object,default:null},shouldCancelStart:{type:Function,default:t=>["input","textarea","select","option","button"].indexOf(t.target.tagName.toLowerCase())!==-1},getHelperDimensions:{type:Function,default:({node:t})=>({width:t.offsetWidth,height:t.offsetHeight})}},emits:["sort-start","sort-move","sort-end","sort-cancel","sort-insert","sort-remove","update:list"],data(){let t=!1;if(this.group){if(this.SlicksortHub)t=!0;else if(process.env.NODE_ENV!=="production")throw new Error('Slicksort plugin required to use "group" prop')}return{sorting:!1,hub:t?this.SlicksortHub:null,manager:new wo}},mounted(){this.hub&&(this.id=this.hub.getId()),this.container=this.$el,this.document=this.container.ownerDocument||document,this._window=this.contentWindow||window,this.scrollContainer=this.useWindowAsScrollContainer?{scrollLeft:0,scrollTop:0}:this.container,this.events={start:this.handleStart,move:this.handleMove,end:this.handleEnd};for(const t in this.events)M(this.events,t)&&x[t].forEach(s=>this.container.addEventListener(s,this.events[t]));this.hub&&this.hub.addContainer(this)},beforeUnmount(){for(const t in this.events)M(this.events,t)&&x[t].forEach(s=>this.container.removeEventListener(s,this.events[t]));this.hub&&this.hub.removeContainer(this),this.dragendTimer&&clearTimeout(this.dragendTimer),this.cancelTimer&&clearTimeout(this.cancelTimer),this.pressTimer&&clearTimeout(this.pressTimer),this.autoscrollInterval&&clearInterval(this.autoscrollInterval)},methods:{handleStart(t){const{distance:s,shouldCancelStart:i}=this.$props;if(!N(t)&&t.button===2||i(t))return!1;this._touched=!0,this._pos=V(t);const l=t.target,o=X(l,r=>r.sortableInfo!=null);if(o&&o.sortableInfo&&this.nodeIsChild(o)&&!this.sorting){const{useDragHandle:r}=this.$props,{index:n}=o.sortableInfo;if(r&&!X(l,a=>a.sortableHandle!=null))return;this.manager.active={index:n},l.tagName.toLowerCase()==="a"&&t.preventDefault(),s||(this.pressDelay===0?this.handlePress(t):this.pressTimer=L(()=>this.handlePress(t),this.pressDelay))}},nodeIsChild(t){return t.sortableInfo.manager===this.manager},handleMove(t){const{distance:s,pressThreshold:i}=this.$props;if(!this.sorting&&this._touched){const l=V(t);this._delta={x:this._pos.x-l.x,y:this._pos.y-l.y};const o=Math.abs(this._delta.x)+Math.abs(this._delta.y);!s&&(!i||i&&o>=i)?(this.cancelTimer&&clearTimeout(this.cancelTimer),this.cancelTimer=L(this.cancel,0)):s&&o>=s&&this.manager.isActive()&&this.handlePress(t)}},handleEnd(){if(!this._touched)return;const{distance:t}=this.$props;this._touched=!1,t||this.cancel()},cancel(){this.sorting||(this.pressTimer&&clearTimeout(this.pressTimer),this.manager.active=null,this.hub&&this.hub.cancel())},handleSortCancel(t){(N(t)||t.key===this.cancelKey)&&(this.newIndex=this.index,this.canceling=!0,this.translate={x:0,y:0},this.animateNodes(),this.handleSortEnd(t))},handlePress(t){t.stopPropagation();const s=this.manager.getActive();if(s){const{getHelperDimensions:i,helperClass:l,hideSortableGhost:o,appendTo:r}=this.$props,{node:n}=s,{index:a}=n.sortableInfo,c=Z(n),h=this.container.getBoundingClientRect(),u=i({index:a,node:n});this.node=n,this.margin=c,this.width=u.width,this.height=u.height,this.marginOffset={x:this.margin.left+this.margin.right,y:Math.max(this.margin.top,this.margin.bottom)},this.boundingClientRect=n.getBoundingClientRect(),this.containerBoundingRect=h,this.index=a,this.newIndex=a;const b=ee(n);this.helper=this.document.querySelector(r).appendChild(b),this.helper.style.position="fixed",this.helper.style.top=`${this.boundingClientRect.top-c.top}px`,this.helper.style.left=`${this.boundingClientRect.left-c.left}px`,this.helper.style.width=`${this.width}px`,this.helper.style.height=`${this.height}px`,this.helper.style.boxSizing="border-box",this.helper.style.pointerEvents="none",o&&(this.sortableGhost=n,n.style.visibility="hidden",n.style.opacity="0"),this.hub&&(this.hub.sortStart(this),this.hub.helper=this.helper,this.hub.ghost=this.sortableGhost),this.intializeOffsets(t,this.boundingClientRect),this.offsetEdge=D(n,this.container),l&&this.helper.classList.add(...l.split(" ")),this.listenerNode=N(t)?n:this._window,x.move.forEach(f=>this.listenerNode.addEventListener(f,this.handleSortMove)),x.end.forEach(f=>this.listenerNode.addEventListener(f,this.handleSortEnd)),x.cancel.forEach(f=>this.listenerNode.addEventListener(f,this.handleSortCancel)),this.sorting=!0,this.$emit("sort-start",{event:t,node:n,index:a})}},handleSortMove(t){if(t.preventDefault(),this.updatePosition(t),this.hub){const s=this.list[this.index];this.hub.handleSortMove(t,s)}(!this.hub||this.hub.isDest(this))&&(this.animateNodes(),this.autoscroll()),this.$emit("sort-move",{event:t})},handleDropOut(){const t=this.list[this.index],s=xo(this.list,this.index);return this.$emit("sort-remove",{oldIndex:this.index}),this.$emit("update:list",s),t},handleDropIn(t){const s=Do(this.list,this.newIndex,t);this.$emit("sort-insert",{newIndex:this.newIndex,value:t}),this.$emit("update:list",s),this.handleDragEnd()},handleDragOut(){this.autoscrollInterval&&(clearInterval(this.autoscrollInterval),this.autoscrollInterval=null),this.hub.isSource(this)?(this.translate={x:1e4,y:1e4},this.animateNodes()):(this.manager.getRefs().forEach(t=>{t.node.style.transform=""}),this.dragendTimer=L(this.handleDragEnd,this.transitionDuration||0))},handleDragEnd(){this.autoscrollInterval&&(clearInterval(this.autoscrollInterval),this.autoscrollInterval=null),se(this.manager.getRefs()),this.sortableGhost&&(this.sortableGhost.remove(),this.sortableGhost=null),this.dragendTimer&&(clearTimeout(this.dragendTimer),this.dragendTimer=null),this.manager.active=null,this._touched=!1,this.sorting=!1},intializeOffsets(t,s){const{useWindowAsScrollContainer:i,containerBoundingRect:l,_window:o}=this;this.marginOffset={x:this.margin.left+this.margin.right,y:Math.max(this.margin.top,this.margin.bottom)},this._axis={x:this.axis.indexOf("x")>=0,y:this.axis.indexOf("y")>=0},this.initialOffset=V(t),this.initialScroll={top:this.scrollContainer.scrollTop,left:this.scrollContainer.scrollLeft},this.initialWindowScroll={top:window.pageYOffset,left:window.pageXOffset},this.translate={x:0,y:0},this.minTranslate={},this.maxTranslate={},this._axis.x&&(this.minTranslate.x=(i?0:l.left)-s.left-this.width/2,this.maxTranslate.x=(i?o.innerWidth:l.left+l.width)-s.left-this.width/2),this._axis.y&&(this.minTranslate.y=(i?0:l.top)-s.top-this.height/2,this.maxTranslate.y=(i?o.innerHeight:l.top+l.height)-s.top-this.height/2)},handleDragIn(t,s,i){if(this.hub.isSource(this))return;this.dragendTimer&&(this.handleDragEnd(),clearTimeout(this.dragendTimer),this.dragendTimer=null);const l=this.manager.getRefs();this.index=l.length,this.manager.active={index:this.index};const o=this.container.getBoundingClientRect(),r=i.getBoundingClientRect();this.containerBoundingRect=o,this.sortableGhost=ee(s),this.container.appendChild(this.sortableGhost);const n=this.sortableGhost.getBoundingClientRect();this.boundingClientRect=n,this.margin=Z(this.sortableGhost),this.width=n.width,this.height=n.height,this.offsetEdge=D(this.sortableGhost,this.container),this.intializeOffsets(t,n),this.initialOffset.x+=n.x-r.x,this.initialOffset.y+=n.y-r.y,this.sorting=!0},handleSortEnd(t){this.listenerNode&&(x.move.forEach(l=>this.listenerNode.removeEventListener(l,this.handleSortMove)),x.end.forEach(l=>this.listenerNode.removeEventListener(l,this.handleSortEnd)),x.cancel.forEach(l=>this.listenerNode.removeEventListener(l,this.handleSortCancel)));const s=this.manager.getRefs();this.helper&&this.helperClass&&this.helper.classList.remove(...this.helperClass.split(" ")),this.autoscrollInterval&&clearInterval(this.autoscrollInterval),this.autoscrollInterval=null;const i=()=>{this.helper&&(this.helper.remove(),this.helper=null),this.hideSortableGhost&&this.sortableGhost&&(this.sortableGhost.style.visibility="",this.sortableGhost.style.opacity=""),se(s),this.hub&&!this.hub.isDest(this)?this.canceling?this.hub.cancel():this.hub.handleSortEnd():this.canceling?this.$emit("sort-cancel",{event:t}):(this.$emit("sort-end",{event:t,oldIndex:this.index,newIndex:this.newIndex}),this.$emit("update:list",Eo(this.list,this.index,this.newIndex))),this.manager.active=null,this._touched=!1,this.canceling=!1,this.sorting=!1};this.transitionDuration||this.draggedSettlingDuration?this.transitionHelperIntoPlace(s,i):i()},transitionHelperIntoPlace(t,s){if(this.draggedSettlingDuration===0||t.length===0||!this.helper)return Promise.resolve();const i=t[this.index].node;let l=0,o=0;const r={top:window.pageYOffset-this.initialWindowScroll.top,left:window.pageXOffset-this.initialWindowScroll.left};if(this.hub&&!this.hub.isDest(this)&&!this.canceling){const h=this.hub.getDest();if(!h)return;const u=h.newIndex,b=h.manager.getOrderedRefs(),f=u<b.length?b[u].node:h.sortableGhost,y=Co(i,f),p=D(i,y),w=D(f,y);l=w.left-p.left-r.left,o=w.top-p.top-r.top}else{const h=t[this.newIndex].node,u={left:this.scrollContainer.scrollLeft-this.initialScroll.left+r.left,top:this.scrollContainer.scrollTop-this.initialScroll.top+r.top};l=-u.left,this.translate&&this.translate.x>0?l+=h.offsetLeft+h.offsetWidth-(i.offsetLeft+i.offsetWidth):l+=h.offsetLeft-i.offsetLeft,o=-u.top,this.translate&&this.translate.y>0?o+=h.offsetTop+h.offsetHeight-(i.offsetTop+i.offsetHeight):o+=h.offsetTop-i.offsetTop}const n=this.draggedSettlingDuration!==null?this.draggedSettlingDuration:this.transitionDuration;R(this.helper,`translate3d(${l}px,${o}px, 0)`,`${n}ms`);const a=h=>{(!h||h.propertyName==="transform")&&(clearTimeout(c),R(this.helper),s())},c=setTimeout(a,n+10);this.helper.addEventListener("transitionend",a)},updatePosition(t){const{lockAxis:s,lockToContainerEdges:i}=this.$props,l=V(t),o={x:l.x-this.initialOffset.x,y:l.y-this.initialOffset.y};if(o.y-=window.pageYOffset-this.initialWindowScroll.top,o.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=o,i){const[r,n]=No(this.lockOffset,this.height,this.width),a={x:this.width/2-r.x,y:this.height/2-r.y},c={x:this.width/2-n.x,y:this.height/2-n.y};this.minTranslate.x&&this.maxTranslate.x&&(o.x=Q(this.minTranslate.x+a.x,this.maxTranslate.x-c.x,o.x)),this.minTranslate.y&&this.maxTranslate.y&&(o.y=Q(this.minTranslate.y+a.y,this.maxTranslate.y-c.y,o.y))}s==="x"?o.y=0:s==="y"&&(o.x=0),this.helper&&(this.helper.style.transform=`translate3d(${o.x}px,${o.y}px, 0)`)},animateNodes(){const{transitionDuration:t,hideSortableGhost:s}=this.$props,i=this.manager.getOrderedRefs(),l={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top},o={left:this.offsetEdge.left+this.translate.x+l.left,top:this.offsetEdge.top+this.translate.y+l.top},r={top:window.pageYOffset-this.initialWindowScroll.top,left:window.pageXOffset-this.initialWindowScroll.left};this.newIndex=null;for(let n=0,a=i.length;n<a;n++){const{node:c}=i[n],h=c.sortableInfo.index,u=c.offsetWidth,b=c.offsetHeight,f={width:this.width>u?u/2:this.width/2,height:this.height>b?b/2:this.height/2},y={x:0,y:0};let{edgeOffset:p}=i[n];p||(i[n].edgeOffset=p=D(c,this.container));const w=n<i.length-1&&i[n+1],B=n>0&&i[n-1];if(w&&!w.edgeOffset&&(w.edgeOffset=D(w.node,this.container)),h===this.index){s&&(this.sortableGhost=c,c.style.visibility="hidden",c.style.opacity="0");continue}t&&(c.style.transitionDuration=`${t}ms`),this._axis.x?this._axis.y?h<this.index&&(o.left+r.left-f.width<=p.left&&o.top+r.top<=p.top+f.height||o.top+r.top+f.height<=p.top)?(y.x=this.width+this.marginOffset.x,p.left+y.x>this.containerBoundingRect.width-f.width&&w&&(y.x=w.edgeOffset.left-p.left,y.y=w.edgeOffset.top-p.top),this.newIndex===null&&(this.newIndex=h)):h>this.index&&(o.left+r.left+f.width>=p.left&&o.top+r.top+f.height>=p.top||o.top+r.top+f.height>=p.top+b)&&(y.x=-(this.width+this.marginOffset.x),p.left+y.x<this.containerBoundingRect.left+f.width&&B&&(y.x=B.edgeOffset.left-p.left,y.y=B.edgeOffset.top-p.top),this.newIndex=h):h>this.index&&o.left+r.left+f.width>=p.left?(y.x=-(this.width+this.marginOffset.x),this.newIndex=h):h<this.index&&o.left+r.left<=p.left+f.width&&(y.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=h)):this._axis.y&&(h>this.index&&o.top+r.top+f.height>=p.top?(y.y=-(this.height+this.marginOffset.y),this.newIndex=h):h<this.index&&o.top+r.top<=p.top+f.height&&(y.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=h))),c.style.transform=`translate3d(${y.x}px,${y.y}px,0)`}this.newIndex==null&&(this.newIndex=this.index)},autoscroll(){const t=this.translate,s={x:0,y:0},i={x:1,y:1},l={x:10,y:10};t.y>=this.maxTranslate.y-this.height/2?(s.y=1,i.y=l.y*Math.abs((this.maxTranslate.y-this.height/2-t.y)/this.height)):t.x>=this.maxTranslate.x-this.width/2?(s.x=1,i.x=l.x*Math.abs((this.maxTranslate.x-this.width/2-t.x)/this.width)):t.y<=this.minTranslate.y+this.height/2?(s.y=-1,i.y=l.y*Math.abs((t.y-this.height/2-this.minTranslate.y)/this.height)):t.x<=this.minTranslate.x+this.width/2&&(s.x=-1,i.x=l.x*Math.abs((t.x-this.width/2-this.minTranslate.x)/this.width)),this.autoscrollInterval&&(clearInterval(this.autoscrollInterval),this.autoscrollInterval=null),(s.x!==0||s.y!==0)&&(this.autoscrollInterval=window.setInterval(()=>{const o={left:1*i.x*s.x,top:1*i.y*s.y};this.useWindowAsScrollContainer?this._window.scrollBy(o.left,o.top):(this.scrollContainer.scrollTop+=o.top,this.scrollContainer.scrollLeft+=o.left),this.translate.x+=o.left,this.translate.y+=o.top,this.animateNodes()},5))}}}),oe={beforeMount(t){t.sortableHandle=!0}},re=e.defineComponent({name:"SlickItem",mixins:[_o],props:{tag:{type:String,default:"div"}},render(){var t,s;return e.h(this.tag,(s=(t=this.$slots).default)===null||s===void 0?void 0:s.call(t))}}),Fo=e.defineComponent({name:"SlickList",mixins:[So],props:{tag:{type:String,default:"div"},itemKey:{type:[String,Function],default:"id"}},render(){var t,s;return this.$slots.item?e.h(this.tag,this.list.map((i,l)=>{let o;if(i!=null){if(typeof this.itemKey=="function")o=this.itemKey(i);else if(typeof i=="object"&&M(i,this.itemKey)&&typeof i[this.itemKey]=="string")o=i[this.itemKey];else if(typeof i=="string")o=i;else throw new Error("Cannot find key for item, use the item-key prop and pass a function or string");return e.h(re,{key:o,index:l},{default:()=>{var r,n;return(n=(r=this.$slots).item)===null||n===void 0?void 0:n.call(r,{item:i,index:l})}})}})):e.h(this.tag,(s=(t=this.$slots).default)===null||s===void 0?void 0:s.call(t))}});e.defineComponent({props:{tag:{type:String,default:"span"}},mounted(){this.$el.sortableHandle=!0},render(){var t,s;return e.h(this.tag,(s=(t=this.$slots).default)===null||s===void 0?void 0:s.call(t))}});let $o=1;function To(t,s,i){return s.id===t.id?!0:t.block&&t.block.includes(s.group)?!1:typeof t.accept=="function"?t.accept({dest:t,source:s,payload:i}):typeof t.accept=="boolean"?t.accept:!!(t.accept&&t.accept.includes(s.group)||t.group===s.group)}function Io({x:t,y:s},i,l){if(ne({x:t,y:s},l.container.getBoundingClientRect()))return l;let o=null,r=1/0;for(let n=0;n<i.length;n++){const a=i[n],c=a.container.getBoundingClientRect();if(ne({x:t,y:s},c))return a;const u=Bo(c),b=Vo(t,s,u.x,u.y);b<r&&(o=a,r=b)}return o}class Po{constructor(){this.helper=null,this.ghost=null,this.refs=[],this.source=null,this.dest=null}getId(){return""+$o++}isSource({id:s}){var i;return((i=this.source)===null||i===void 0?void 0:i.id)===s}getSource(){return this.source}isDest({id:s}){var i;return((i=this.dest)===null||i===void 0?void 0:i.id)===s}getDest(){return this.dest}addContainer(s){this.refs.push(s)}removeContainer(s){this.refs=this.refs.filter(i=>i.id!==s.id)}sortStart(s){this.source=s,this.dest=s}handleSortMove(s,i){var l,o,r,n;const a=this.dest,c=this.source;if(!a||!c)return;const h=this.refs,u=V(s,"client"),b=Io(u,h,a)||a;a.id!==b.id&&To(b,c,i)&&(this.dest=b,a.handleDragOut(),b.handleDragIn(s,this.ghost,this.helper)),a.id!==((l=this.source)===null||l===void 0?void 0:l.id)&&((o=this.dest)===null||o===void 0||o.updatePosition(s),(r=this.dest)===null||r===void 0||r.animateNodes(),(n=this.dest)===null||n===void 0||n.autoscroll())}handleSortEnd(){var s,i,l,o;if(((s=this.source)===null||s===void 0?void 0:s.id)===((i=this.dest)===null||i===void 0?void 0:i.id))return;const r=(l=this.source)===null||l===void 0?void 0:l.handleDropOut();(o=this.dest)===null||o===void 0||o.handleDropIn(r),this.reset()}reset(){this.source=null,this.dest=null,this.helper=null,this.ghost=null}cancel(){var s;(s=this.dest)===null||s===void 0||s.handleDragEnd(),this.reset()}}const Oo={install(t){t.directive("drag-handle",oe),t.provide("SlicksortHub",new Po)}},Mo={MessageToast:de,CircularProgress:A,Autocomplete:Ee,DatePicker:z,Sortable:U,SimpleTree:j,Filemanager:ai,SlickList:Fo,SlickItem:re,Tab:fi,Confirm:W,Alert:K,PasswordInput:P,CookieConsent:Vi,Pagination:Ii,VueCkeditor:O,ProfileForm:sn,UserForm:kn,ArticleForm:Rn,PageForm:ko},Ro={formatFilesize:I},Lo={Focus:T,Handle:oe},Ao={SimpleFetch:g,PromisedXhr:H,UrlQuery:_,DateFunctions:C},zo={Slicksort:Oo};E.Components=Mo,E.Directives=Lo,E.Filters=Ro,E.Plugins=zo,E.Util=Ao,Object.defineProperty(E,Symbol.toStringTag,{value:"Module"})});
