"use strict";var Coord=function(e,t){this.x=+e?parseInt(e,10):0,this.y=+t?parseInt(t,10):0};Coord.prototype={add:function(e){return new Coord(this.x+(+e.x?parseInt(e.x,10):0),this.y+(+e.y?parseInt(e.y,10):0))},sub:function(e){return new Coord(this.x-(+e.x?parseInt(e.x,10):0),this.y-(+e.y?parseInt(e.y,10):0))},len:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}};var Color=function(e){var t,n,r,o;if(!e)return this.r=0,this.g=0,this.b=0,void(this.a=1);/rgb\s*\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(?:,\s(?:1|0)(?:\.\d+)?\s*)?\)/.test(e)?(t=+(e=e.slice(e.indexOf("(")+1,-1).split(","))[0],n=+e[1],r=+e[2],o=+e[3]):"#"===e.slice(0,1)&&(4===e.length?(t=parseInt(e.slice(1,2)+e.slice(1,2),16),n=parseInt(e.slice(2,3)+e.slice(2,3),16),r=parseInt(e.slice(3)+e.slice(3),16)):(t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16),o=parseInt(e.slice(7),16))),this.r=isNaN(t)||255<t?255:t,this.g=isNaN(n)||255<n?255:n,this.b=isNaN(r)||255<r?255:r,this.a=isNaN(o)||1<o?1:o};if(Color.prototype={toHex:function(){return"#"+("00"+Math.round(this.r).toString(16)).slice(-2)+("00"+Math.round(this.g).toString(16)).slice(-2)+("00"+Math.round(this.b).toString(16)).slice(-2)},toRGB:function(){return"rgb("+Math.round(this.r)+","+Math.round(this.g)+","+Math.round(this.b)+")"}},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){function t(){}function n(){return i.apply(this instanceof t?this:e,o.concat(r.call(arguments,0)))}var r=Array.prototype.slice,o=r.call(arguments,1),i=this;return t.prototype=i.prototype,n.prototype=new t,n}),Object.keys||(Object.keys=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n}),Object.create||(Object.create=function(e){if(1<arguments.length)throw new Error("Object.create polyfill allows only one parameter.");function t(){}return t.prototype=e,new t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=0,r=this.length;n<r;++n)n in this&&e.call(t,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=0,r=this.length,o=new Array(r);n<r;++n)n in this&&(o[n]=e.call(t,this[n],n,this));return o}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n,r=0,o=this.length,i=[];r<o;++r)r in this&&(n=this[r],e.call(t,n,r,this)&&i.push(n));return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n=this.length,r=+t||0;for(r=r<0?Math.ceil(r)+n:Math.floor(r);r<n;++r)if(r in this&&this[r]===e)return r;return-1}),String.prototype.trim||function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}(),Array.prototype.copy=function(){return this.slice(0)},Array.prototype.fill||(Array.prototype.fill=function(e){for(var t=Object(this),n=+t.length||0,r=+arguments[1]||0,o=void 0===arguments[2]?n:+o||0,i=r<0?Math.max(n+r,0):Math.min(r,n),a=0<o?Math.max(n+o,0):Math.min(o,n);i<a;)t[i++]=e;return t}),Array.prototype.swap=function(e,t){if(void 0===t&&(t=++e),!(e<0||e>=this.length||t<0||t>=this.length)){var n=this[e];this[e]=this[t],this[t]=n}},Array.prototype.inArray=function(e){return!(-1==this.indexOf(e))},Number.prototype.toFormattedString=function(e,t,n){var r,o="";if(t=t||".",n=n||",",e="number"==typeof e?Math.round(e):0,r=this.toFixed(e).toString().split("."),n){for(;3<r[0].length;)o=n+r[0].slice(-3)+o,r[0]=r[0].slice(0,-3);r[0]=r[0]+o}return(this<0?"-":"")+r[0]+(r[1]?t+r[1]:"")},String.prototype.lpad=function(e,t){for(var n=e-this.length,r="",o=t||" ";0<=--n;)r+=o;return r+this},String.prototype.rpad=function(e,t){for(var n=e-this.length,r="",o=t||" ";0<=--n;)r+=o;return this+r},String.prototype.shortenToLen=function(e){if(this.length<e)return String(this);var t=this.lastIndexOf(" ",e);return-1==t?this.slice(0,e):this.slice(0,t).replace(/\s+$/g,"")},String.prototype.toFloat=function(e){var t,n,r;return 2<(t=this.split(e||".")).length?NaN:t[1]&&!(n=parseInt(t[1],10))?NaN:(r=t[0].replace(/[^0-9]/g,""))?parseFloat(r+"."+n):NaN},String.prototype.toDateTime=function(e,t){var n,r,o,i,a,s,l,c,d,u=this.trim();switch(e=e||"date_de"){case"date_us":case"date_de":if(!(n=u.match(/^\d{1,2}([\/.\-])\d{1,2}\1\d{0,4}$/))&&/^([0-9]{4}|[0-9]{6}|[0-9]{8})$/.test(u))r=[u.slice(0,2),u.slice(2,4),u.slice(4)];else{if(!n||2!==n.length)return!1;if(3!==(r=u.split(n[1])).length)return!1}return o=[("00"+r[0]).slice(-2),("00"+r[1]).slice(-2),(""+(new Date).getFullYear()).slice(0,4-r[2].length)+r[2]],a="date_us"==e?(i=+o[1],+o[0]):(i=+o[0],+o[1]),s=+o[2],a<1||12<a?!1:!(i<1||i>new Date(s,a,0).getDate())&&(t?new Date(s,a-1,i):(n="date_de"==e?".":"/",o[0]+n+o[1]+n+o[2]));case"date_iso":if(!(n=u.match(/^\d{2}(\d{2})?([\/.\-])\d{1,2}\2\d{1,2}$/))&&/^([0-9]{6}|[0-9]{8})$/.test(u))r=[u.slice(0,2),u.slice(2,4),u.slice(4)];else{if(!n||3!==n.length)return!1;if(3!==(r=u.split(n[2])).length)return!1}return s=+(o=[(""+(new Date).getFullYear()).slice(0,4-r[0].length)+r[0],("00"+r[1]).slice(-2),("00"+r[2]).slice(-2)])[0],a=+o[1],i=+o[2],!(a<1||12<a)&&(!(i<1||i>new Date(s,a,0).getDate())&&(t?new Date(s,a-1,i):o[0]+"-"+o[1]+"-"+o[2]));case"time_hm":if(!(n=u.match(/^\d{1,2}([:.\-])\d{1,2}$/))&&/^[0-9]{4}$/.test(u))r=[u.slice(0,2),u.slice(2)];else{if(!n||2!==n.length)return!1;if(2!==(r=u.split(n[1])).length)return!1}return!(23<+r[0]||59<+r[1])&&("00"+r[0]).slice(-2)+":"+("00"+r[1]).slice(-2);case"time_hms":if(!(n=u.match(/^\d{1,2}([:.\-])\d{1,2}\1\d{1,2}$/))&&/^([0-9]{4}|[0-9]{6})$/.test(u))r=[u.slice(0,2),u.slice(2,4),u.slice(4)];else{if(!n||2!==n.length)return!1;if(3!==(r=u.split(n[1])).length)return!1}return l=+r[0],c=+r[1],d=+r[2],!(23<l||59<c||59<d)&&("00"+l).slice(-2)+":"+("00"+c).slice(-2)+":"+("00"+d).slice(-2)}},String.prototype.toUcFirst=function(){return this.slice(0,1).toUpperCase()+this.slice(1)},Date.prototype.format=function(e){var n=this,t={"%h":function(){return""+n.getHours()},"%H":function(){return(""+n.getHours()).lpad(2,"0")},"%i":function(){return""+n.getMinutes()},"%I":function(){return(""+n.getMinutes()).lpad(2,"0")},"%s":function(){return""+n.getSeconds()},"%S":function(){return(""+n.getSeconds()).lpad(2,"0")},"%d":function(){return""+n.getDate()},"%D":function(){return(""+n.getDate()).lpad(2,"0")},"%m":function(){return""+(n.getMonth()+1)},"%M":function(){return(""+(n.getMonth()+1)).lpad(2,"0")},"%y":function(){return(""+n.getFullYear()).slice(-2)},"%Y":function(){return""+n.getFullYear()},"%w":function(){return""+n.getCW()},"%W":function(){return(""+n.getCW()).lpad(2,"0")},"%z":function(){var e=n.getCW(),t=n.getMonth();return""+(1===e&&11===t?n.getFullYear()+1:52<=e&&!t?n.getFullYear()-1:n.getFullYear())},"%Z":function(){var e=n.getCW(),t=n.getMonth();return(""+(1===e&&11===t?n.getFullYear()+1:52<=e&&!t?n.getFullYear()-1:n.getFullYear())).lpad(2,"0")}};return e.replace(/%[hisdmywz]{1}/gi,function(e){return t[e]()})},Date.prototype.getAbsoluteDays=function(){return Math.floor(.1+this.getTime()/864e5)},Date.prototype.getCW=function(e){if(!e){var t=this.getDay()||7,n=this.getAbsoluteDays(),r=new Date(new Date(864e5*(n+4-t)).getFullYear(),0,-10);return Math.floor((n-t-r.getAbsoluteDays())/7)}var o=new Date(this.getFullYear(),0,1).getAbsoluteDays();if(0===new Date(this.getFullYear(),0,1).getDay())return Math.floor((this.getAbsoluteDays()-o)/7)+1},String.prototype.create=function(e){var t,n,r=document.createElement(this);if(this.attr){for(t=this.attr.length;t--;)if("name"===this.attr[t].name){try{r=document.createElement("<"+this+" name="+this.attr[t].value+">")}catch(e){}break}for(t=this.attr.length;t--;)"class"===(n=this.attr[t]).name?r.className=n.value:"type"===n.name?r.setAttribute(n.name,n.value):r[n.name]=n.value}return vxJS.dom.appendChildren(r,e)},String.prototype.setProp=function(e,t){var n,r=new String(this);if(r.attr||(r.attr=[]),1<arguments.length&&r.attr.push({name:e,value:t}),1===arguments.length)if(Array.isArray(e))for(n=e.length;n--;)r.attr.push({name:e[n][0],value:e[n][1]});else if("object"==typeof e)for(n in e)e.hasOwnProperty(n)&&r.attr.push({name:n,value:e[n]});return r},Array.prototype.create=function(e){var t,n=[];for(t=0;t<this.length;++t)n[t]=this[t].create(e);return n},Array.prototype.setProp=function(e,t){for(var n=this.length;n--;)this[n]=this[n].setProp(e,t);return this},Array.prototype.domWrapWithTag=function(e){var t,n,r="acronym|address|applet|area|a|base|basefont|big|blockquote|body|br|b|caption|center|cite|code|dd|dfn|dir|div|dl|dt|em|font|form|h1|h2|h3|h4|h5|h6|head|hr|html|img|input|i|kbd|link|li|map|menu|meta|ol|option|param|pre|p|q|samp|script|select|small|strike|strong|style|sub|sup|table|tbody|td|textarea|th|title|tr|tt|ul|u|var".split("|");if("string"==typeof e)for(t=0;t<this.length;++t)r.inArray(this[t])?this[t]=e.create(this[t].create()):this[t]=e.create(this[t]);else for(t=0;t<this.length;++t)for(n=0;n<e.length;++n)this[t]=e[n].create(this[t]);return this},function(){var e,t,n,r,o=["webkit","moz"],i=o.length,a=0;for(e=0;e<i&&!window.requestAnimationFrame;++e)t=o[e],window.requestAnimationFrame=window[t+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&window.cancelAnimationFrame||(window.requestAnimationFrame=function(e){return n=+new Date,r=Math.max(a+16,n),setTimeout(function(){e(a=r)},r-n)},window.cancelAnimationFrame=clearTimeout)}(),!this.vxJS)var vxJS={};!function(s){function i(e,t){var n=typeof e[t];return!!(b.isHM.test(n)&&e[t]||"unknown"==n)}function e(e,t){for(var n=t.length;n--;)if(!i(e,t[n]))return!1;return!0}function o(e){for(var t=[],n=e.length,r=0;r<n;)t.push(e[r++]);return t}var a,l,c,t,d,r,u,n,f,h,m,p,v,g,y,b={isHM:/^(object|function)$/i,isNumberOrString:/^(string|number)$/,blanks:/\s+/},x=s.document,S=x.documentElement,w="function"==typeof Object.assign?Object.assign:function(e,t){var n,r;if("object"!=typeof e)throw new TypeError("Cannot convert first argument to object");for(r=1;r<arguments.length;++r)if(null!=(t=arguments[r]))for(n in t=Object(arguments[r]))t.hasOwnProperty(n)&&(e[n]=t[n]);return e};if(!s.localStorage){var C=document.createElement("div"),N="localStorage";C.style.display="none",x.getElementsByTagName("head")[0].appendChild(C),C.addBehavior&&(C.addBehavior("#default#userdata"),C.load(N),s.localStorage={setItem:function(e,t){C.load(N),C.getAttribute(e)||++this.length,C.setAttribute(e,t),C.save(N)},getItem:function(e){return C.load(N),C.getAttribute(e)},removeItem:function(e){C.load(N),C.removeAttribute(e),C.save(N),this.length&&--this.length},clear:function(){var e,t=0;for(C.load(N);e=C.XMLDocument.documentElement.attributes[t++];)C.removeAttribute(e.name);C.save(N),this.length=0},key:function(e){return C.load(N),C.XMLDocument.documentElement.attributes[e]},length:C.XMLDocument.documentElement.attributes.length})}function J(o,i){var a=o.element||o;return t[i]||(t[i]=[]),t[i].inArray(a)||(t[i].push(a),"function"==typeof a["on"+i]&&c.push({id:0,elem:o,type:i,callback:a["on"+i],custom:!1}),a["on"+i]=function(e){var t,n,r=(e=e||s.event).target||e.srcElement||a;for(t=0,n=c.length;t<n;++t)c[t].elem===o&&c[t].type===e.type&&c[t].callback.apply(r,[e,o]);"mousewheel"==i&&vxJS.event.preventDefault(e)}),a["on"+i]}function T(e){for(var t=0,n=u.length;t<n;++t)u[t](e)}vxJS.element={register:function(e){var t=function(e){for(var t,n=a.length,r=e.nodeType&&1===e.nodeType?"element":"widget";n--;)if((t=a[n])[r]&&t[r]===e)return t}(e);return t||(t=new vxJS.E,e.element&&1===e.element.nodeType?(t.element=e.element,t.widget=e):e.nodeType&&1===e.nodeType&&(t.element=e),a.push(t)),t},registry:a=[]},vxJS.E=function(){},vxJS.E.prototype={addListener:function(e,t){return vxJS.event.addListener(this,e,t),this},removeListener:function(e){return vxJS.event.removeListener(this,e),this}},vxJS.event=(l=e(document,["createEvent","addEventListener","removeEventListener"])?"W3C":e(document,["fireEvent","attachEvent","detachEvent"])?"MS":"legacy",c=[],t={},d=0,r={},u=[],{fireEvent:function(e,t){switch(l){case"W3C":var n=document.createEvent("Event");return n.initEvent(t,!0,!0),void e.dispatchEvent(n);case"MS":return void e.fireEvent("on"+t,document.createEventObject());default:e["on"+t]()}},addDomReadyListener:(i(x,"addEventListener")?x.addEventListener("DOMContentLoaded",T,!1):i(s,"addEventListener")?s.addEventListener("load",T,!1):i(s,"attachEvent")?s.attachEvent("onload",T):("function"==typeof s.onload&&u.push(s.onload),s.onload=T),function(e){u.push(e)}),addXhrListener:function(e,t){var n="__ID__"+d++;return c.push({id:n,elem:"xhr",type:e,fn:null,callback:t,custom:!0}),n},addMousewheelListener:function(t,n){var e,r="__ID__"+d++,o="mousewheel";switch(l){case"W3C":e=function(e){n.apply(e.target,[e,t]),vxJS.event.preventDefault(e)},t.addEventListener(o,e,!1),t.addEventListener("DOMMouseScroll",e,!1),o=["mousewheel","DOMMouseScroll"];break;case"MS":t.attachEvent("onmousewheel",e=function(){n.apply(s.event.srcElement,[s.event,t]),vxJS.event.preventDefault(s.event)});break;default:e=J(t,"mousewheel")}return c.push({id:r,elem:t,type:o,fn:e,callback:n,custom:!1}),r},removeMousewheelListener:function(e,t){this.removeListener(e,"string"==typeof e||t?t:"mousewheel")},addListener:function(t,e,n){var r,o,i="__ID__"+d++,a=t.element;if(o=t.nodeType&&1===t.nodeType||t===x||t===window||a&&!this.isCustomEvent(a,e))switch(l){case"W3C":(a||t).addEventListener(e,r=function(e){n.apply(e.target,[e,t])},!1);break;case"MS":(a||t).attachEvent("on"+e,r=function(e){n.apply((e||s.event).srcElement,[e||s.event,t])});break;default:r=J(t,e)}else r=function(e){n.call(t,e)};return c.push({id:i,elem:t,type:e,fn:r,callback:n,custom:!o}),i},removeListener:function(e,t){var n,r;if("string"==typeof e)for(n=c.length;n--&&(r=c[n]).id!==e;);else if("string"==typeof t)for(e.element&&!this.isCustomEvent(e.element,t)&&(e=e.element),n=c.length;n--&&((r=c[n]).elem!==e||("string"!=typeof r||r.type!=t)&&-1==r.type.indexOf(t)););else for(n=c.length;n--&&(!((r=c[n]).elem===e||r.elem.element&&r.elem.element===e)||r.callback!==t););if(!(n<0||(c.splice(n,1),r.custom)))switch(l){case"W3C":"string"==typeof r.type?(r.elem.element||r.elem).removeEventListener(r.type,r.fn,!1):r.type.forEach(function(e){(r.elem.element||r.elem).removeEventListener(e,r.fn,!1)});break;case"MS":"string"==typeof r.type?(r.elem.element||r.elem).detachEvent("on"+r.type,r.fn):r.type.forEach(function(e){(r.elem.element||r.elem).detachEvent("on"+e,r.fn)}),delete r.fn}},serve:function(e,t,n){for(var r,o=0;r=c[o++];)r.elem===e&&r.type===t&&r.fn(n)},serveXhr:function(e,t){for(var n,r=0;n=c[r++];)"xhr"===n.elem&&n.type===t&&n.callback.apply(e)},isCustomEvent:function(e,t){var n;return n=(t="on"+t)+(e.tagName||""),void 0===r[n]&&(r[n]=!0,i(e,"setAttribute")&&void 0===e[t]&&(e.setAttribute(t,"return true;"),r[n]=i(e,t))),!r[n]},getAbsMousePos:function(e){return new Coord(e.clientX,e.clientY).add(vxJS.dom.getDocumentScroll())},getMouseButtons:function(e){var t=e.which;return void 0!==t?{left:1==t,right:2==t,middle:3==t}:{left:1&(t=e.button),right:2&t,middle:4&t}},getMousewheelDirection:function(e){return e.detail?e.detail<1?"up":"down":1<e.wheelDelta?"up":"down"},cancelBubbling:function(e){i(e,"stopPropagation")&&e.stopPropagation(),e.cancelBubble=!0},preventDefault:function(e){i(e,"preventDefault")&&e.preventDefault(),e.returnValue=!1}}),vxJS.dom={getBody:function(){return y=y||(x.body&&"object"==typeof x.body?x.body:x.getElementsByTagName("body")[0]||null)},unitToPixels:(p=document.createElement("div"),v=p.style,g={position:"absolute",border:"none",margin:"0",padding:"0",height:"1px",visibility:"hidden"},Object.keys(g).forEach(function(e){v[e]=g[e]}),function(e){var t,n=this.getBody();return v.width="10"+e,n.appendChild(p),t=p.offsetWidth/10,n.removeChild(p),t}),allowsFixedPosition:function(){if(void 0===m){var e,t="div".create(),n=t.style,r=vxJS.dom.getBody();n.position="fixed",n.top="0px",n.left="0px",r.appendChild(t),e=vxJS.dom.getElementOffset(t),r.removeChild(t),m=!e.x&&!e.y}return m},setOpacity:function(e,t){var n=e.style,r=1<t?1:t<0?0:t;"string"==typeof n.opacity?n.opacity=""+r:"string"==typeof n.filter&&(n.filter="alpha(opacity="+100*r+")")},getOpacity:function(e){var t,n=e.style;return"string"==typeof n.opacity?n.opacity?+n.opacity:1:e.filters&&void 0!==e.filters.Alpha.opacity?e.filters.Alpha.opacity/100:"string"==typeof n.filter&&(t=n.filter.match(/\s*opacity\s*=\s*(\d+)/i))&&t[1]?t[1]/100:1},getStyle:function(e,t){return s.getComputedStyle?s.getComputedStyle(e,"")[t]:!!e.currentStyle&&e.currentStyle[t]},hasClassName:function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},addClassName:function(e,t){e.classList?e.classList.add(t):this.hasClassName(e,t)||(e.className+=(e.className.trim().length?" ":"")+t)},removeClassName:function(e,t){if(e.classList)e.classList.remove(t);else{var n=e.className.split(b.blanks),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}},toggleClassName:function(e,t){e.classList?e.classList.toggle(t):this[this.hasClassName(e,t)?"removeClassName":"addClassName"](e,t)},appendChildren:function(e,t){var n;if(b.isNumberOrString.test(typeof t))e.appendChild(document.createTextNode(t));else if(t)if(void 0!==t.length&&void 0===t.nodeName)for(n=0;n<t.length;++n)b.isNumberOrString.test(typeof t[n])?e.appendChild(document.createTextNode(t[n])):t[n]&&e.appendChild(t[n]);else e.appendChild(t);return e},deleteChildNodes:function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},cleanDOM:(h=/\S/,function e(t){var n;if(8===t.nodeType||3===t.nodeType&&!h.test(t.data))t.parentNode.removeChild(t);else if(t.childNodes)for(n=t.childNodes.length;n--;)e(t.childNodes[n])}),walk:function(e,t){for(t(e),e=e.firstChild;e;)this.walk(e,t),e=e.nextSibling},getElementsByClassName:(f={},i(document,"getElementsByClassName")?function(e,t,n){var r=(t||document).getElementsByClassName(e);return n?(n=n.toUpperCase(),Array.prototype.filter.call(r,function(e){return e.nodeName==n})):o(r)}:i(document,"evaluate")?function(e,t,n){var r,o,i=[],a=0;for(o=document.evaluate(".//"+(n||"*").toLowerCase()+"[contains(concat(' ', @class, ' '), ' "+e+" ')]",t||document,function(e){return"html"===e?"http://www.w3.org/1999/xhtml":null},XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);r=o.snapshotItem(a);)i[a++]=r;return i}:function(e,t,n){var r,o,i,a=[],s=0,l=(t||document).getElementsByTagName(n?n.toLowerCase():"*");for(f[e]?o=f[e]:(o=new RegExp("(^|\\s)"+e+"(\\s|$)"),f[e]=o);r=l[s++];)(i=r.className)&&(i==e||o.test(i))&&a.push(r);return a}),getParentElement:function(e,t){var n,r,o;if(!t)return e.parentNode;if(/^[a-z0-9]+$/i.test(t)){for(n=t.toUpperCase();e=e.parentNode;)if(e.nodeName.toUpperCase()===n)return e}else{if(!(r=t.match(/^([a-z0-9]+)([\.#])(\w+)$/i))||r.length<3)return null;for(n=r[1].toUpperCase(),o="."===r[2]?new RegExp("\\b"+r[3]+"\\b"):null;e=e.parentNode;)if(e.nodeName.toUpperCase()===n&&(!o&&e.id===r[3]||o.test(e.className)))return e}return null},getElementOffset:function(e,t){var n,r,o,i=e.ownerDocument,a=this.getBody();if(e===(t=t||i))return new Coord(0,0);for(o=function(e,t){var n=typeof e[t];return!(!b.isHM.test(n)||!e[t])}(e,"offsetParent")?e.offsetParent:null,r=e.parentNode,n=new Coord(e.offsetLeft,e.offsetTop);r&&r!==t;){if(r!==a&&r!==S&&(n.x-=r.scrollLeft||0,n.y-=r.scrollTop||0),r===o&&r!==a&&(n.x+=o.offsetLeft,n.y+=o.offsetTop,o=r.offsetParent),"fixed"===r.style.position){n.y+=a.scrollTop||S.scrollTop,n.x+=a.scrollLeft||S.scrollLeft;break}r=r.parentNode}return n},getElementPosition:function(e){return new Coord(parseInt(this.getStyle(e,"left"),10),parseInt(this.getStyle(e,"top"),10))},setElementPosition:function(e,t){var n=e.style;n.left=t.x+"px",n.top=t.y+"px"},getElementSize:function(e){return new Coord(e.offsetWidth,e.offsetHeight)},getElementStyleSize:function(e){var t=e.style,n=t.width,r=t.height,o=this.getElementSize(e),i=new Coord(o.x,o.y);return t.height=o.y+"px",i.y-=e.offsetHeight-o.y,t.height=r,t.width=o.x+"px",i.x-=e.offsetWidth-o.x,t.width=n,i},setElementSize:function(e,t){var n=e.style;n.width=t.x+"px",n.height=t.y+"px"},nextSameNodeNameSibling:function(e){for(var t=e.nodeName;e=e.nextSibling;)if(e.nodeName===t)return e},prevSameNodeNameSibling:function(e){for(var t=e.nodeName;e=e.previousSibling;)if(e.nodeName===t)return e},moveBefore:function(e,t){var n=e.parentNode;n.removeChild(e),n.insertBefore(e,t)},moveAfter:function(e,t){var n=e.parentNode;n.removeChild(e),n.insertBefore(e,t?t.nextSibling:null)},concatText:function(e){var t,n,r="",o=e.childNodes;for(t=0;t<o.length;t++)switch(o[t].nodeType){case 1:if("INPUT"===(e=o[t].nodeName.toUpperCase())&&"text"===o[t].type)r+=o[t].value;else{if("SELECT"===e&&"select-one"===o[t].type&&o[t].options&&0<=o[t].selectedIndex&&o[t].options[o[t].selectedIndex]){r+=this.concatText(o[t].options[o[t].selectedIndex]);break}if("SELECT"===e&&"select-multiple"===o[t].type&&o[t].options)for(n=o[t].options.length;n--;)r+=o[t].options[n].selected?this.concatText(o[t].options[n]):"";else r+="IMG"===e?o[t].title?o[t].title:o[t].alt?o[t].alt:o[t].src:this.concatText(o[t])}break;case 3:r+=o[t].nodeValue}return r},parse:function(e){var t,n,r=document.createDocumentFragment(),s=function(e,t){var n,r,o,i,a=e.properties;if(!e.node){if(e.text)return void t.appendChild(document.createTextNode(e.text));if(e.html){for((i=document.createElement("div")).innerHTML=e.html;i.firstChild;)t.appendChild(i.firstChild);return}return e.fragment?void t.appendChild(e.fragment):void 0}if(o=document.createElement(e.node),"object"==typeof a)for(n in a)a.hasOwnProperty(n)&&("text"===n?o.appendChild(document.createTextNode(a[n])):o[n]=a[n]);if(e.childnodes&&(r=e.childnodes.length))for(n=0;n<r;n++)s(e.childnodes[n],o);t.appendChild(o)};if(Array.isArray(e))for(t=0,n=e.length;t<n;++t)s(e[t],r);else s(e,r);return r},getViewportSize:function(){var i=this.getBody();if(n)return n();var r="string"==typeof x.compatMode?function(){return S&&-1!==x.compatMode.toLowerCase().indexOf("css")?S:i}:function(){return S&&0!==S.clientWidth?S:i};if(S)var o=function(){var e,t={compatMode:x.compatMode},n=S.clientHeight,r=i.clientHeight,o=x.createElement("div");if(o.style.height="100px",i.appendChild(o),t.body=!n||n!=S.clientHeight,t.html=r!=i.clientHeight,i.removeChild(o),t.body||t.html&&t.body!=t.html)return"number"==typeof i.clientTop&&i.clientTop&&S.clientWidth&&(e=i.style.borderWidth,i.style.borderWidth="0px",t.includeBordersInBody=i.clientHeight!=r,i.style.borderWidth=e),t}();return"number"==typeof x.clientWidth?n=function(){return new Coord(x.clientWidth,x.clientHeight)}:S&&"number"==typeof S.clientWidth?n=function(){var e,t,n=r();return o&&(n=o.body?i:S),e=n.clientHeight,t=n.clientWidth,o&&o.body&&o.includeBordersInBody&&(e+=2*i.clientTop,t+=2*i.clientLeft),new Coord(t,e)}:"number"==typeof window.innerWidth&&(n=function(){return new Coord(window.innerWidth,window.innerHeight)}),n?n():void 0},getDocumentScroll:function(){return"number"==typeof s.pageXOffset?this.getDocumentScroll=function(){return new Coord(s.pageXOffset,s.pageYOffset)}:this.getDocumentScroll=function(){return new Coord(Math.max(vxJS.dom.getBody().scrollLeft,S.scrollLeft),Math.max(vxJS.dom.getBody().scrollTop,S.scrollTop))},this.getDocumentScroll()}},vxJS.selection={getSelection:i(s,"getSelection")?function(){return s.getSelection()}:i(x,"selection")?function(){return x.selection}:void 0,set:function(e,t,n){var r;t=t||0,void 0===n&&(n=e.value.length-t),i(e,"setSelectionRange")?e.setSelectionRange(t,t+n):i(e,"createTextRange")&&((r=e.createTextRange()).moveStart("character",t),r.moveEnd("character",t+n-e.value.length),r.select()),e.focus()},get:function(e){var t,n;return void 0!==e.selectionStart?e.value.substring(e.selectionStart,e.selectionEnd):(n=this.getSelection())&&i(n,"createRange")?(t=n.createRange()).parentElement==e?t.text:void 0:""},getCaretPosition:function(e){var t,n,r,o;return void 0!==e.selectionStart?e.selectionStart:(t=this.getSelection())&&i(t,"createRange")?(e.focus(),n=t.createRange(),o=(r=e.createTextRange()).duplicate(),r.moveToBookmark(n.getBookmark()),o.setEndPoint("EndToStart",r),o.text.length):void 0},setCaretPosition:function(e,t){"end"===t?this.set(e,e.value.length):this.set(e,+t||0,0)}},vxJS.cookie={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,r,o,i){var a="";if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;if(n)switch(n.constructor){case Number:a=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(o?"; domain="+o:"")+(r?"; path="+r:"")+(i?"; secure":""),!0},removeItem:function(e,t,n){return!(!e||!this.hasItem(e))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},vxJS.isHostMethod=i,vxJS.hasHostMethods=e,vxJS.isEmpty=function(e){var t;if("object"!=typeof e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},vxJS.merge=w,vxJS.collectionToArray=o,vxJS.widget={}}(this),vxJS.xhr=function(i,a,s,l){a=a||{},s=s||{};function c(){s.node&&vxJS.dom.removeClassName(s.node,"loading"),h&&window.clearTimeout(h),g&&(g.onreadystatechange=function(){},0!==g.readyState&&4!==g.readyState&&g.abort()),m=!1}function d(){4===g.readyState&&(c(),200<=g.status&&g.status<300||1223===g.status?(i.forcePlainTextResponse?y.response=g.responseText:i.forceXMLResponse?y.response=g.responseXML||g.responseText:y.response=JSON.parse(g.responseText||"{}"),l&&"function"==typeof l.complete&&l.complete.call(y),vxJS.event.serve(y,"complete"),vxJS.event.serveXhr(y,"complete")):(l&&"function"==typeof l.fail&&l.fail.call(y),vxJS.event.serve(y,"fail"),vxJS.event.serveXhr(y,"fail")))}function u(e,t){v[e]=t}function f(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(b(t,e[t]));return n.join("&")}var h,m,p=(i=i||{}).timeout||5e3,v={},g=new XMLHttpRequest,y={response:{}},b=function(t,e){var n,r,o=[];if(!0===e)return encodeURIComponent(t)+"=1";if(!1===e)return encodeURIComponent(t)+"=0";if(Array.isArray(e))return r=0,e.forEach(function(e){o.push(b(t+"["+r+++"]",e))}),o.join("&");if("object"!=typeof e)return encodeURIComponent(t)+"="+encodeURIComponent(e);for(n in e)e.hasOwnProperty(n)&&o.push(b(t+"["+n+"]",e[n]));return o.join("&")};return y.setHeader=function(e,t){return u(e,t),this},y.setHeaders=function(e){for(var t=0,n=Object.keys(e);t<n.length;++t)u(n[t],e[n[t]]);return this},y.use=function(e,t,n,r){return e&&(i=vxJS.merge(i,e)),t&&(a=t),n&&(s=n),r&&(l=r),this},y.getRequestParameters=function(){return i},y.getParameters=function(){return a},y.getAnimationParameters=function(){return s},y.getCallbacks=function(){return l},y.isActive=function(){return m},y.xhrObj=g,y.abort=c,y.submit=function(){var e,t,n,r=window.location,o=encodeURI(i.uri||(r.hash?r.href.substring(0,r.href.indexOf(r.hash)):r.href));for(c(),vxJS.event.serve(y,"beforeSend"),i.command&&((a.formData||a).httpRequest=i.command),i.echo&&(a.echo=1),u("X-Requested-With","XMLHttpRequest"),i.forceXMLResponse&&g.overrideMimeType&&g.overrideMimeType("text/xml"),n=i.method&&"GET"==i.method.toUpperCase()?(g.open("GET",o+(-1!==o.indexOf("?")?"&":"?")+(new Date).getTime()+"&"+(i.useJsonSerialization?"xmlHttpRequest="+encodeURIComponent(JSON.stringify(a)):f(a)),!0),null):(g.open("POST",o,!0),i.raw?a:(u("Content-Type","application/x-www-form-urlencoded"),i.useJsonSerialization?"xmlHttpRequest="+encodeURIComponent(JSON.stringify(a)):f(a))),e=0,t=Object.keys(v);e<t.length;++e)g.setRequestHeader(t[e],v[t[e]]);g.onreadystatechange=d,g.send(n),m=!0,0<p&&(h=window.setTimeout(function(){c(),l&&"function"==typeof l.timeout&&l.timeout.call(y),vxJS.event.serve(y,"timeout"),vxJS.event.serveXhr(y,"timeout")},p)),s.node&&vxJS.dom.addClassName(s.node,"loading")},y},vxJS.widget.xhrForm=function(h,e,m){if(!h.nodeName||"form"!==h.nodeName.toLowerCase())throw new Error("widget.xhrForm: no form element specified!");m=m||{};for(var p,v,g,y,b,x,d,u=[],f=[],S={},w=vxJS.xhr(e||{}),C=[],t=function(t){var n,r=new FileReader,o=[];r.addEventListener("load",function(){o[n].arrayBuffer=r.result,o[++n]&&r.readAsArrayBuffer(o[n].file)});function e(){if(r.readyState===FileReader.LOADING&&r.abort(),o=[],t.files.length){for(var e=0;e<t.files.length;++e)o.push({file:t.files[e],arrayBuffer:null});n=0,r.readAsArrayBuffer(o[0].file)}}return t.value&&e(),t.addEventListener("change",e),{getFiles:function(){return o},getInput:function(){return t}}},n=h.querySelectorAll("input[type=file]"),r=0;r<n.length;++r)C.push(t(n[r]));function N(){b=!0}function J(){b=!1}function T(e){for(var t,n,r,o,i=e.length;i--;)if(n=h.elements[e[i].name])if(t=e[i].value,n instanceof NodeList&&Array.isArray(t)&&n.length===t.length)switch(n.item(0).type){case"radio":case"checkbox":for(r=0;r<t.length;++r)n[r].checked=!!t[r];break;case"select-multiple":for(r=0;r<t.length;++r)if(Array.isArray(t[r]))for(o=n[r].options.length;o--;)n[r].options[o].selected=-1!==t[r].indexOf(n[r].options[o].value);break;default:for(r=0;r<t.length;++r)n[r].value=t[r]||""}else if(n instanceof Node)switch(n.type){case"radio":case"checkbox":n.checked=!!t;break;case"select-multiple":if(Array.isArray(t))for(o=n.options.length;o--;)n.options[o].selected=-1!==t.indexOf(n.options[o].value);break;default:n.value=t||""}}function E(){u.forEach(function(e){var t;e.elements.forEach(function(e){vxJS.dom.removeClassName(e,"error")}),(t=document.getElementById("error_"+e.name))&&(vxJS.dom.removeClassName(t,"error"),e.text&&t.lastChild&&t.removeChild(t.lastChild))}),u=[]}function D(e,t){var n,r,o,i,a,s,l,c,d,u={},f=/^(.*?)\[(.*?)\]$/;for(r=0;r<e.length;++r)if(c=o=null,s=(n=e[r]).name,m.namesToHashes&&(c=s.match(f))&&(s=c[1],l=c[2],o={}),n.type&&!n.disabled){switch(n.type){case"radio":case"checkbox":n.checked&&(l?o[l]=n.value:o=n.value);break;case"select-multiple":if(vxJS.dom.hasClassName(n,"vxJS_dualSelectBox_source"))continue;for(d=[],i=(a=n.options).length;i--;)(a[i].selected||vxJS.dom.hasClassName(n,"vxJS_dualSelectBox_dest"))&&d.push(a[i].value);l?o[l]=d:o=d;break;case"select-one":l?o[l]=n.options[n.selectedIndex].value:o=n.options[n.selectedIndex].value;break;case"submit":case"image":case"button":t&&n===t&&(o=n.value);break;case"file":break;default:c?o[l]=n.value:o=n.value}if(null===o||"object"==typeof o&&!Object.keys(o).length)continue;void 0===u[s]?u[s]=c?[o]:o:l?u[s][l]=o[l]:(Array.isArray(u[s])||(u[s]=[u[s]]),u[s].push(o))}return u}function A(e){for(var t=f.length;t--;)if(e===f[t].id)return f[t].container}function L(){y&&vxJS.dom.addClassName(y,"loading"),!0,N(),h.submit()}function M(e){var t,n,r,o,i,a,s=[],l=[],c=null;if(e=e||this.response,vxJS.event.serve(S,"beforeResponseCheck",e),f.forEach(function(e){vxJS.dom.deleteChildNodes(e.container)}),E(),J(),a=e.response&&e.echo?e.response:e){if(i=a.command){if("redirect"===i&&a.location)return void(window.location.href=a.location);if("submit"===i)return void L()}if(a.elements){for(t=a.elements.length;t--;)(n=a.elements[t]).value&&s.push({name:n.name,value:n.value}),n.error&&("object"==typeof n.error&&(c=[],Object.keys(n.error).forEach(function(e){n.error[e]&&(c[e]=!0)})),l.push({name:n.name,text:n.errorText||null,ndx:c}));T(s),function(e){e.forEach(function(n){var e,t=h.elements[n.name];t?t.nodeName?(n.elements=[t],vxJS.dom.addClassName(t,"error")):(n.elements=vxJS.collectionToArray(t),n.elements.forEach(function(e,t){n.ndx&&!n.ndx[t]||vxJS.dom.addClassName(e,"error")})):n.elements=[],(e=document.getElementById("error_"+n.name))&&(vxJS.dom.addClassName(e,"error"),n.text&&e.appendChild(document.createTextNode(n.text)))}),u=e}(l)}if(r=a.msgBoxes)for(t=r.length;t--;)r[t].id&&(o=A(r[t].id))&&o.appendChild(vxJS.dom.parse(r[t].elements))}d=e,vxJS.event.serve(S,"check",e)}return S.addSubmit=function(e){return vxJS.event.addListener(e,"click",function(e){vxJS.event.preventDefault(e),function(e){var t,n,r,o,i,a,s,l,c,d,u,f="vxJS-xhrForm-boundary";if(!b)if(y=e,vxJS.event.serve(S,"beforeSubmit"),x)x=!1;else if(N(),v)M({command:"submit"});else{if(t=D(h.elements,e),vxJS.merge(t,p),C.length){for(n in w.setHeader("Content-Type","multipart/form-data; boundary="+f),a=[],w.getRequestParameters().command&&a.push({name:"httpRequest",value:w.getRequestParameters().command}),w.getRequestParameters().echo&&a.push({name:"echo",value:w.getRequestParameters().echo}),t)if(t.hasOwnProperty(n))if(Array.isArray(t[n]))for(r=0,o=t[n].length;n<o;++r)a.push({name:key+"["+r+"]",value:t[n][r]});else a.push({name:n,value:t[n]});for(s=[],l="",n=0;n<a.length;++n)l+="--"+f+"\r\n",l+='content-disposition: form-data; name="'+a[n].name+'"\r\n\r\n'+a[n].value+"\r\n";for(s.push(l),n=0;n<C.length;++n)for(i=C[n].getFiles(),r=0;r<i.length;++r)l="--"+f+"\r\n",l+='content-disposition: form-data; name="'+C[n].getInput().name+'"; ',l+='filename="'+i[r].file.name+'"\r\n',l+="content-type: "+i[r].file.type+"\r\n\r\n",s.push(l,new Uint8Array(i[r].arrayBuffer),"\r\n");for(s.push("--"+f+"--"),o=0,n=s.length;n--;)o+=s[n].length;for(d=new Uint8Array(o),n=u=0;n<s.length;++n)if(s[n]instanceof Uint8Array)d.set(s[n],u),u+=s[n].length;else{for(c=new Uint8Array(s[n].length),r=0,o=s[n].length;r<o;++r)c[r]=s[n].charCodeAt(r);d.set(c,u),u+=o}w.use({raw:!0},d,{node:y})}else w.use(null,t,{node:y});w.submit(),g=t}}(this)}),this},S.addMessageBox=function(e,t){return f.push({container:e,id:t||"MsgBox"+f.length}),this},S.clearErrors=function(){return E(),this},S.getErrors=function(){return u},S.clearFileInputs=function(){var e,t=h.getElementsByTagName("input");if(t&&(e=t.length)){for(;--e;)"file"===t[e].type&&t[e].parentNode.replaceChild("input".setProp([["type","file"],["name",t[e].name]]).create(),t[e]);return this}},S.forceRequest=function(){var e;if(vxJS.event.serve(S,"beforeSubmit"),!x)return N(),e=D(h.elements,this),vxJS.merge(e,p),w.use(null,e,{node:y||null}).submit(),g=e,this;x=!1},S.disableImmediateSubmit=function(){return v=!1,this},S.enableImmediateSubmit=function(){return v=!0,this},S.setValues=function(e){for(var t=Object.keys(e),n=t.length,r=[];n--;)r.push({name:t[n],value:e[t[n]]});return T(r),this},S.getSubmittedValues=function(){return g},S.getLastXhrResponse=function(){return d},S.setPayload=function(e){return p=e,this},S.getPayload=function(){return p},S.clearPayload=function(){return p=null,this},S.isSubmittingNow=function(){return b},S.cancelSubmission=function(){x=!0},S.getUploads=function(){return C},vxJS.event.addListener(w,"complete",M),vxJS.event.addListener(w,"fail",J),vxJS.event.addListener(w,"timeout",J),S.element=h,S.submit=L,S.xhr=w,S},vxJS.widget.calendar=function(s,m){"object"!=typeof m&&(m={});var p,t,v,g,n,r,y,b,x,S,a=m.alignTo||s,l={},e=new Date,w=new Date(e.getFullYear(),e.getMonth(),e.getDate()),C=m.initDate&&m.initDate.constructor===Date?m.initDate:null,N=m.inputLocale||"date_de",c=m.outputFormat||("date_de"===N?"%D.%M.%Y":"%Y-%M-%D"),J=(m.months||"Jan Feb MÃ¤rz Apr Mai Juni Juli Aug Sept Okt Nov Dez").split(" "),T=m.showCw;m.noPast&&(x=m.noPast.constructor===Date?m.noPast:w),m.noFuture&&(S=m.noFuture.constructor===Date?m.noFuture:w);function o(){var e=s.value.trim();return/^\d\d?[ \/\-.]+(?:\d{2}|\d{4})$/.test(e)?function(e,t){t=t||(new Date).getFullYear();var n=7*(e-1)+1,r=new Date(t,0,1).getDay()||7;return new Date(t,0,n-r+(4<r?8:1))}((e=e.split(/[ \/\-.]+/))[0],(""+(C||w).getFullYear()).slice(0,4-e[1].length)+e[1]):(e=e.toDateTime(N,!0))?e:void 0}function i(e){e&&e.constructor===Date||(e=new Date),b?(b.setMonth(e.getMonth()),b.setFullYear(e.getFullYear())):b=new Date(e.getFullYear(),e.getMonth(),1)}function d(){var e,t,n,r,o,i,a="div".setProp("class","calendar-body").create(),s=b.getMonth(),l=b.getFullYear(),c=new Date(l,s+1,0),d=c.getDate(),u=new Date(l,s,"date_us"===N?1:0).getDay(),f=(("date_us"===N?6:7)-c.getDay())%7,h=new Date(l,s,1-u);for(m.yearSelect?(v.innerHTML=J[s],g.innerHTML=l):v.innerHTML=J[s]+" "+l,y=[],t=1-u;t<=d+f;++t)n=["calendar-date"],i=new Date(l,s,t),(x&&i<x||S&&S<i)&&n.push("disabled"),t<1?n.push("prev-month"):d<t?n.push("next-month"):n.push("current-month"),-1===n.indexOf("disabled")?(o="button".setProp("class","date-item").create(i.getDate()),y[t+u-1]={date:i,elem:o,disabled:-1!==n.indexOf("disabled")}):o="span".setProp("class","date-item").create(i.getDate()),i.toString()===w.toString()&&o.classList.add("date-today"),C&&i.toString()===C.toString()&&o.classList.add("active"),a.appendChild("div".setProp("class",n.join(" ")).create(o));if(T)for(r=0,e=h.getCW("date_us"===N);a.childNodes[r];)52<e&&(e=y[7*t].date.getCW("date_us"===N)),a.insertBefore("div".setProp("class","calendar-date cw disabled").create("span".setProp("class","date-item").create(e++)),a.childNodes[r]),r+=8;p.querySelector(".calendar-container").replaceChild(a,p.querySelector(".calendar-container").lastChild)}function u(){var e;t||(s&&(e=o())&&(C=e),i(C),d(),a&&function(){var e,t,n=vxJS.dom.getElementOffset(a),r=vxJS.dom.getElementSize(a),o=vxJS.dom.getDocumentScroll(),i=p.style;i.visibility="hidden",i.display="",e=vxJS.dom.getElementSize(p),i.display="none",i.visibility="visible",t=n.y+r.y+e.y>vxJS.dom.getViewportSize().y+o.y&&n.y-e.y>o.y?n.y-e.y:n.y+r.y,vxJS.dom.setElementPosition(p,new Coord(n.x,t))}(),p.style.display="",t=!0,vxJS.event.serve(l,"showWidget"))}function f(){t&&(p.style.display="none",t=!1,vxJS.event.serve(l,"hideWidget"))}function h(e){s&&s.disabled||(vxJS.event.cancelBubbling(e),vxJS.event.removeListener(n),r=vxJS.event.addListener(document,"click",E),u())}if(function(){var e,t,i,a;switch(v="div".setProp("class","month navbar-primary").create(),t=["button".setProp("class","btn btn-action btn-link btn-large prvMon").create(),v,"button".setProp("class","btn btn-action btn-link btn-large nxtMon").create()],i="div".setProp("class","calendar-container").create(["div".setProp("class","calendar-header").create(),"div".setProp("class","calendar-body").create()]),m.yearSelect&&(g="div".setProp("class","year navbar-primary").create(),t.push("button".setProp("class","btn btn-action btn-link btn-large prvYear").create(),g,"button".setProp("class","btn btn-action btn-link btn-large nxtYear").create())),p="div".setProp("class",m.skinClass||"calendar"+(m.showCw?" cw":"")).create(["div".setProp("class","calendar-nav navbar").create(t),i]),N){case"date_us":e="CW,S,M,T,W,T,F,S";break;case"date_iso":e="CW,M,T,W,T,F,S,S";break;default:e="KW,M,D,M,D,F,S,S"}e=e.split(","),T||e.shift();for(var n=0;n<e.length;++n)i.firstChild.appendChild("div".setProp("class","calendar-date").create(e[n]));vxJS.event.addListener(p,"click",function(e){var t,n,r=this.classList;if(vxJS.event.cancelBubbling(e),"button"===this.nodeName.toLowerCase()){if(r.contains("prvMon"))b.setMonth(b.getMonth()-1),d(),t="monthChange";else if(r.contains("nxtMon"))b.setMonth(b.getMonth()+1),d(),t="monthChange";else if(r.contains("prvYear"))b.setFullYear(b.getFullYear()-1),d(),t="yearChange";else if(r.contains("nxtYear"))b.setFullYear(b.getFullYear()+1),d(),t="yearChange";else for(var o=y.length;o--;)if(y[o].elem===this){t="datePick",n=y[o].date,m.dontHide&&((a=i.querySelector(".active"))&&vxJS.dom.removeClassName(a,"active"),vxJS.dom.addClassName(this.parentNode,"active"));break}t&&("datePick"===t&&(C=n,s&&(s.value=n.format(c)),E()),vxJS.event.serve(l,t))}}),m.dontHide||(p.style.display="none",p.style.position="absolute",document.body.appendChild(p))}(),m.trigger&&!m.dontHide){n=vxJS.event.addListener(m.trigger,m.eType||"click",h);var E=function(){vxJS.event.removeListener(r),n=vxJS.event.addListener(m.trigger,m.eType||"click",h),f()}}else s?(C=C||o(),i(C)):i(),d(),E=function(){f()};return s&&vxJS.event.addListener(s,"keydown",function(e){var t,n=e.keyCode;13===n&&m.dontHide&&(t=o(),C&&t.toString()===C.toString()||(i(C=t),d())),-1!==[9,13,27].indexOf(n)&&E()}),l.element=p,l.show=u,l.hide=f,l.getDate=function(){return C},l.setDate=function(e){e&&e.constructor===Date&&!isNaN(e)&&(i(C=e),d())},l.clearDate=function(){C=null,i(w),d()},l},vxJS.widget.sorTable=function(n,r){function o(e){var t,n,r=vxJS.event.getAbsMousePos(e),o=h.pos.y,i=h.elem;if(r.y<o&&(t=vxJS.dom.prevSameNodeNameSibling(i))&&r.y<(o-=t.offsetHeight/2)){for(;(n=vxJS.dom.prevSameNodeNameSibling(t))&&!(r.y>o-t.offsetHeight/2-n.offsetHeight/2);)o-=t.offsetHeight,t=n;if(S==t)return;w(),S.above=t,vxJS.dom.addClassName(t,"insertAbove")}else if(r.y>(o+=i.offsetHeight)&&(t=vxJS.dom.nextSameNodeNameSibling(i))&&r.y>(o+=t.offsetHeight/2)){for(;(n=vxJS.dom.nextSameNodeNameSibling(t))&&!(r.y<o+t.offsetHeight/2+n.offsetHeight/2);)o+=t.offsetHeight,t=n;if(S==t)return;w(),S.below=t,vxJS.dom.addClassName(t,"insertBelow")}else w();vxJS.event.preventDefault(e)}function i(){vxJS.event.removeListener(m),vxJS.event.removeListener(p),S.above?S.above.parentNode.insertBefore(h.elem,S.above):S.below&&S.below.parentNode.insertBefore(h.elem,S.below.nextSibling),(S.below||S.above)&&(C(f),f=null),vxJS.event.serve(x,"dragStop"),vxJS.dom.removeClassName(h.elem,"dragged"),w(),h=null}function a(e){for(var t=this;t&&t.parentNode.parentNode!=d;)t=t.parentNode;t&&"manual"===y[t.cellIndex].format&&(p=vxJS.event.addListener(document,"mousemove",o),m=vxJS.event.addListener(document,"mouseup",i),h={elem:t.parentNode,pos:vxJS.dom.getElementOffset(t.parentNode)},vxJS.dom.addClassName(h.elem,"dragged"),vxJS.event.serve(x,"dragStart"),vxJS.event.preventDefault(e))}function s(e){var t=g.length;if(e)for(vxJS.dom.removeClassName(e.elem,e.asc?"desc":"asc"),vxJS.dom.addClassName(e.elem,e.asc?"asc":"desc");t--;)vxJS.dom.addClassName(g[t].cells[e.ndx],"active")}function l(){f&&(vxJS.event.serve(x,"beginSort"),function(e){var t=document.createDocumentFragment(),n=0;for(g=[];e[n];)g[n]=e[n].element,t.appendChild(g[n++]);d.appendChild(t)}(function(e){var t,n=g.length,r=y[e].format,o=[],i={float:function(e){return/^[+\-]?(?:\d{1,3}(?:[ ,\x27]\d{3})+|\d+)(?:\.\d+)?$/.test(e)?e.replace(/[^0-9.\-]/g,""):e},float_comma:function(e){return/^[+\-]?(?:\d{1,3}(?:[ .\x27]\d{3})+|\d+)(?:,\d+)?$/.test(e)?e.replace(/[^0-9,\-]/g,"").replace(",","."):e},date:function(e,t){var n=e.toDateTime(t,!0);return n?n.format("%Y-%M-%D"):e},time:function(e,t){return e.toDateTime(t)}};if(r&&/^(date_|time_)[a-z]+$/.test(r)&&(r=r.split("_")[0]),r&&"function"!=typeof r)for(;n--;)t=g[n],o[n]={element:t,value:i[r](vxJS.dom.concatText(g[n].cells[e]),y[e].format)};else for(;n--;)t=g[n],o[n]={element:t,value:vxJS.dom.concatText(t.cells[e]).toLowerCase()};return o}(f.ndx).sort("function"==typeof f.format?f.format.bind(f):function(){var n=this.asc?1:-1;return/^(?:float|float_comma)$/.test(this.format)?function(e,t){return e=parseFloat(e.value),isNaN(e)?1:(t=parseFloat(t.value),isNaN(t)?-1:(e-t)*n)}:function(e,t){return e.value===t.value?0:e.value<t.value?-n:n}}.bind(f)())),vxJS.event.serve(x,"finishSort"))}function e(){for(var e,t,n=this;!/th|td/i.test(n.nodeName)&&n.parentNode;)n=n.parentNode;void 0!==(t=n.cellIndex)&&(e=y[t],/^no_sort|manual$/.test(e.format)||(C(f),e===f?e.asc=!e.asc:f=e,s(e),l()))}var c,d,u,f,h,m,p,t,v=(r=r||{}).columnFormat&&r.columnFormat.length?r.columnFormat:[],g=[],y=[],b=[],x={},S={},w=function(){S.above?(vxJS.dom.removeClassName(S.above,"insertAbove"),S.above=null):S.below&&(vxJS.dom.removeClassName(S.below,"insertBelow"),S.below=null)},C=function(e){var t=g.length;if(e)for(vxJS.dom.removeClassName(e.elem,e.asc?"asc":"desc");t--;)vxJS.dom.removeClassName(g[t].cells[e.ndx],"active")};return x.getActiveColumn=function(){return f},x.initSort=function(){g=vxJS.collectionToArray(d.rows),b=[].concat(g),f&&s(f)},x.getCurrentOrder=function(){var e,t=g.length,n=[];for(e=0;e<t;++e)n.push(b.indexOf(d.rows[e]));return n},x.insertRow=function(e,t){(+t>g.length||void 0===t)&&(t=g.length),b.splice(t,0,e),g.splice(t,0,e),d.insertBefore(e,g[t+1]||null),f&&vxJS.dom.addClassName(e.cells[f.ndx],"active")},x.removeRow=function(e){b.splice(b.indexOf(e),1),g.splice(g.indexOf(e),1),d.removeChild(e)},x.replaceRow=function(e,t){b.splice(b.indexOf(t),1,e),g.splice(g.indexOf(t),1,e),d.replaceChild(e,t),f&&vxJS.dom.addClassName(e.cells[f.ndx],"active")},x.removeAllRows=function(){var e;for(b=[],g=[];e=d.lastChild;)d.removeChild(e)},x.updateRow=function(r,e){Array.isArray(e)&&(r.nodeName&&"tr"!=!r.nodeName.toLowerCase()||(r=g[+ndx]),e.forEach(function(e,t){var n=r.cells[t];null!==e&&(vxJS.dom.deleteChildNodes(n),e.nodeType?n.appendChild(e):n.appendChild(document.createTextNode(e)))}))},x.sortBy=function(e,t){var n=y[e];/^no_sort|manual$/.test(n.format)||(n.asc=!t||"asc"==t.toLowerCase(),n!==f&&(C(f),f=n),s(n),l())},x.enableSort=function(){t||(t=vxJS.event.addListener(c.rows[void 0===r.activeHeaderRowIndex?c.rows.length-1:r.activeHeaderRowIndex],"click",e),vxJS.dom.removeClassName(c,"disabled"))},x.disableSort=function(){t&&(vxJS.event.removeListener(t),vxJS.dom.addClassName(c,"disabled"),t=null)},x.getDraggedRow=function(){return h.elem},x.reSort=l,function(){var e,t;if("tbody"===n.nodeName.toLowerCase())n=(d=n).parentNode;else{if("table"!==n.nodeName.toLowerCase())throw new Error("vxJS.widget.sorTable: No valid table or tbody element.");d=n.tBodies[0]}if(!(c=n.getElementsByTagName("thead")[0])&&!d)throw new Error("vxJS.widget.sorTable: neither tbody nor thead element found.");for(c||(c="thead".create(),d.parentNode.insertBefore(c,d),c.appendChild(d.rows[0])),d||(d="tbody".create(),c.parentNode.appendChild(d)),t=void 0===r.activeHeaderRowIndex?c.rows.length-1:r.activeHeaderRowIndex,u=c.rows[t].cells.length,-1!==v.indexOf("manual")&&vxJS.event.addListener(d,"mousedown",a),e=0;e<u;++e)y.push({ndx:e,elem:c.rows[t].cells[e],format:v[e],asc:!0});x.initSort(),x.enableSort()}(),x.element=d,x},vxJS.widget.simpleTabs=function(){function f(e,t,n,r){this.tabBar=e,this.label=t.trim(),this.page=n,this.id=r,this.render()}var h={},m=[],p=vxJS.hasHostMethods(window.history,["pushState","replaceState"]);f.prototype={render:function(){var e,t,n,r,o,i=h.tabWrap,a=h.shortenLabelsTo&&this.label.length>h.shortenLabelsTo?(r=this.label,o=h.shortenLabelsTo,r.slice(0,Math.ceil(o/2))+"..."+r.slice(-Math.floor(o/2))):this.label,s=h.shortenLabelsTo&&this.label.length>h.shortenLabelsTo?this.label:"";if(t=this.id?"a".setProp("href",h.setHash?"#"+this.id:"").create(a):document.createTextNode(a),e="li".setProp({title:s,class:"tab-item"}).create(),i)if("string"==typeof i)e.appendChild(i.create(t));else{for(n=i.length;n--;)t=i[n].create(t);e.appendChild(t)}else e.appendChild(t);return this.element=e,this},focus:function(){var e=this.element.getElementsByTagName("a");return e&&e[0]&&e[0].focus(),this},show:function(){return this.visibilty=!0,vxJS.dom.addClassName(this.element,"active"),this.page.style.display="",this},hide:function(){return this.visibilty=!1,vxJS.dom.removeClassName(this.element,"active"),this.page.style.display="none",this},disable:function(){return this.disabled=!0,vxJS.dom.addClassName(this.element,"disabled"),this},enable:function(){return this.disabled=!1,vxJS.dom.removeClassName(this.element,"disabled"),this},isDisabled:function(){return!!this.disabled}};function v(e){this.tabs=[],this.container=e}return v.prototype={enable:function(){return this.inactive=!1,vxJS.dom.removeClassName(this.element,"disabled"),this},disable:function(){return this.inactive=!0,vxJS.dom.addClassName(this.element,"disabled"),this},getTabByElement:function(e){for(var t=this.tabs.length;t--;)if(this.tabs[t].element===e)return this.tabs[t]},getTabByNdx:function(e){return this.tabs[e]},getTabById:function(e){for(var t=this.tabs.length;t--;)if(this.tabs[t].id===e)return this.tabs[t]},getTabNdx:function(e){for(var t=this.tabs.length;t--;)if(this.tabs[t]===e)return t},gotoTab:function(e,t){var n=this.last;if(e&&-1!==this.tabs.indexOf(e)&&n!==e)return n.hide(),e.show(),this.last=e,t&&e.id&&h.setHash&&(p?window.history.pushState(e.id,"","#"+e.id):window.location="#"+e.id),this},gotoPrevTab:function(e){return this.gotoTab(this.last.prevTab,e)},gotoNextTab:function(e){return this.gotoTab(this.last.nextTab,e)},focus:function(e,t){return this.gotoTab(e,t),e.focus(),this},getLast:function(){return this.last},insertTab:function(e,t){var n,r=new f(this,e.label,e.page,e.id);return r.hide(),t?((n=t.prevTab)&&(n.nextTab=r),(t.prevTab=r).prevTab=n,r.nextTab=t,this.tabs.splice(this.getTabNdx(t),0,r),this.container.insertBefore(e.page,t.page),this.ulElement.insertBefore(r.element,t.element)):(((n=this.tabs[this.tabs.length-1]).nextTab=r).nextTab=null,r.prevTab=n,this.tabs.push(r),this.container.insertBefore(e.page,n.page.nextSibling),this.ulElement.insertBefore(r.element,n.element.nextSibling)),this},removeTab:function(e){var t=this.getTabNdx(e);return e.prevTab&&(e.prevTab.nextTab=e.nextTab),e.nextTab&&(e.nextTab.prevTab=e.prevTab),this.container.removeChild(e.page),this.ulElement.removeChild(e.element),this.tabs.splice(t,1),this}},p&&vxJS.event.addListener(window,"popstate",function(e){var t,n=m.length;if(e.state)for(;n--&&!(t=m[n].getTabById(e.state)););t&&m[n].gotoTab(t,!1)}),function(e,t){var n=vxJS.dom.getElementsByClassName("vxJS_tabThis",e),r=n.length,d=window.location.hash.slice(1)||"";h=t||{};for(var u=function(e,t){var n=t.getTabByElement(this.nodeName&&"LI"===this.nodeName.toUpperCase()?this:vxJS.dom.getParentElement(this,"li"));!n||n.isDisabled()||t.inactive||(vxJS.event.serve(t,"beforeTabClick"),t.gotoTab(n,!0),vxJS.event.serve(t,"afterTabClick")),vxJS.event.preventDefault(e)};r--;)!function(e){var t,n,r,o,i,a,s,l=vxJS.dom.getElementsByClassName("section",e),c=new v(e);for(o=0,i=l.length;o<i;++o)(t=l[o].getElementsByTagName("h2"))[0]&&(a=t[0].id,(s=new f(c,vxJS.dom.concatText(t[0]),l[o],a)).hide(),t[0].parentNode.removeChild(t[0]),c.tabs.push(s),(a&&a===d||!r&&vxJS.dom.hasClassName(l[o],"default"))&&(r=s));if(i=c.tabs.length){for(r=r||c.tabs[0],n="ul".setProp("class","tab").create(),o=0;o<i;++o)(s=c.tabs)[o].nextTab=s[o+1]||null,s[o].prevTab=0<=o-1?s[o-1]:null,n.appendChild(s[o].element);r.show(),c.last=r,c.ulElement=n,c.element="div".setProp("class","vxJS_tabBar").create([h.spacersTop,n,h.spacersBottom]),e.insertBefore(c.element,e.firstChild),vxJS.event.addListener(c,"click",u),m.push(c),p&&r.id&&h.setHash&&window.history.replaceState(r.id,"","#"+r.id)}}(n[r]);return m}}();