<?xml version="1.0" encoding="UTF-8"?>

<config>

	<routes script="admin.php" default_redirect="auth_violation">
		<route id="auth_violation" controller="admin/authViolation" />

		<route id="login" controller="admin/login" />
		<route id="logout" controller="admin/logout" />

		<route id="profile" controller="admin/profile" auth="observe_row" />
		<route id="profile_data_get" path="profile_data" controller="admin/profile" method="get" auth="observe_row" request_methods="GET" />
		<route id="profile_data_post" path="profile_data" controller="admin/profile" method="post" auth="observe_row" request_methods="POST" />

		<route id="pages" controller="admin/pages" auth="superadmin" />
		<route id="pages_init" controller="admin/pages" auth="superadmin" method="init" />
		<route id="page_add" controller="admin/pages" auth="superadmin" method="add" />
		<route id="page_add_init" controller="admin/pages" auth="superadmin" method="addInit" />
		<route id="page_del" controller="admin/pages" auth="superadmin" method="del" request_methods="DELETE" />
		<route id="page_edit" controller="admin/pages" auth="superadmin" method="edit" />
		<route id="page_init" controller="admin/pages" auth="superadmin" method="editInit" />
		<route id="page_update" controller="admin/pages" auth="superadmin" method="update" request_methods="POST" />
		<route id="page_revision_load" controller="admin/pages" auth="superadmin" method="loadRevision" />
		<route id="page_revision_activate" controller="admin/pages" auth="superadmin" method="activateRevision" request_methods="POST" />
		<route id="page_revision_delete" controller="admin/pages" auth="superadmin" method="deleteRevision" request_methods="DELETE" />

		<route id="inline_edit" controller="admin/pages" method="inlineEdit" path="pages/inline" auth="superadmin" request_methods="POST"/>

		<route id="users" controller="admin/users" path="users" auth="superadmin" />
		<route id="users_init" controller="admin/users" auth="superadmin" method="init" />
		<route id="user_init" controller="admin/users" auth="superadmin" method="editInit" />
		<route id="user_add" controller="admin/users" auth="superadmin" method="add" />
		<route id="user_del" controller="admin/users" auth="superadmin" method="del" request_methods="DELETE" />
		<route id="user_edit" controller="admin/users" auth="superadmin" method="edit" />
		<route id="user_update" controller="admin/users" auth="superadmin" method="update" request_methods="POST" />

		<route id="articles" controller="admin/articles" auth="privileged" />
		<route id="articles_init" controller="admin/articles" method="init" auth="privileged" />
		<route id="article_init" controller="admin/articles" method="editInit" auth="privileged" />
		<route id="article_add" controller="admin/articles" method="add" path="articles/add" auth="privileged" />
		<route id="article_del" controller="admin/articles" method="del" auth="privileged" request_methods="DELETE" />
		<route id="article_edit" controller="admin/articles" method="edit" path="articles/edit" auth="privileged" />
		<route id="article_update" controller="admin/articles" method="update" auth="privileged" request_methods="POST" />
		<route id="article_publish" controller="admin/articles" method="publish" auth="superadmin" request_methods="POST" />
		<route id="article_link_file" controller="admin/articles" method="fileLink" auth="privileged" request_methods="POST" />
		<route id="get_linked_files" controller="admin/articles" method="getLinkedFiles" auth="privileged" />
		<route id="update_linked_files" controller="admin/articles" method="updateLinkedFiles" auth="privileged" request_methods="POST" />
		<route id="toggle_linked_files" controller="admin/articles" method="toggleLinkedFile" auth="privileged" request_methods="POST" />

		<route id="article_files_init" controller="admin/files" method="init" auth="privileged" />
		<route id="article_file_upload" controller="admin/files" method="fileUpload" auth="privileged" request_methods="POST" />
		<route id="article_folder_read" controller="admin/files" method="folderRead" auth="privileged" />

		<route id="files" controller="admin/files" auth="privileged" />
		<route id="files_init" controller="admin/files" method="init" auth="privileged" />
		<route id="files_search" controller="admin/files" method="search" auth="privileged" />
		<route id="folders_tree" controller="admin/files" method="getFoldersTree" auth="privileged" />
		<route id="file_get" controller="admin/files" method="fileGet" auth="privileged" />
		<route id="file_update" controller="admin/files" method="fileUpdate" auth="privileged" request_methods="POST" />
		<route id="file_rename" controller="admin/files" method="fileRename" auth="privileged" request_methods="POST" />
		<route id="file_move" controller="admin/files" method="fileMove" auth="privileged" request_methods="POST" />
		<route id="file_del" controller="admin/files" method="fileDel" auth="privileged" request_methods="DELETE" />
		<route id="file_upload" controller="admin/files" method="fileUpload" auth="privileged" request_methods="POST" />
		<route id="folder_read" controller="admin/files" method="folderRead" auth="privileged" />
		<route id="folder_get" controller="admin/files" method="folderGet" auth="privileged" />
		<route id="folder_update" controller="admin/files" method="folderUpdate" auth="privileged" request_methods="POST" />
		<route id="folder_add" controller="admin/files" method="folderAdd" auth="privileged" request_methods="POST" />
		<route id="folder_rename" controller="admin/files" method="folderRename" auth="privileged" request_methods="POST" />
		<route id="folder_del" controller="admin/files" method="folderDel" auth="privileged" request_methods="DELETE" />
		<route id="selection_del" controller="admin/files" method="selectionDel" auth="privileged" request_methods="DELETE" />
		<route id="selection_move" controller="admin/files" method="selectionMove" auth="privileged" request_methods="POST" />

		<route id="filepicker" controller="admin/files" auth="privileged" />
	</routes>

	<routes script="installer.php">
		<route id="installer" controller="installer/installer"/>
	</routes>

	<menus>
		<menu id="admin" script="admin.php" auth="privileged">
			<menuentry page="articles" text="Artikel"/>
			<menuentry page="files" text="Dateien"/>
			<menuentry page="pages" text="Seiten" auth="superadmin"/>
			<menuentry page="users" text="User" auth="superadmin"/>
		</menu>
	</menus>

	<paths>
		<path id="mysql_log_path" subdir="log"/>
		<path id="css_path" subdir="css"/>
		<path id="js_path" subdir="js"/>
		<path id="tpl_path" subdir="view"/>
		<path id="formtemplates_path" subdir="view/forms"/>
		<path id="editable_tpl_path" subdir="view/default" />
		<path id="img_site_path" subdir="img/site"/>
		<path id="locale_path" subdir="locales"/>
		<path id="files_path" subdir="files" />
	</paths>

	<services>
		<service id="bruteforce_throttler" class="App/Service/vxWeb/BruteforceThrottler">
			<parameter name="whitelisted_ips" value="127.0.0.1"/>
		</service>
	</services>

	<templating>
		<filters>
			<filter id="admin_overlay" class="App/Filter/vxWeb/AdminOverlay"/>
		</filters>
	</templating>
</config>
